{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContractCallPayloadBuilder = exports.ContractUpgradePayloadBuilder = exports.ContractDeployPayloadBuilder = exports.ArwenVirtualMachine = void 0;\n\nconst transactionPayload_1 = require(\"../transactionPayload\");\n\nconst utils_1 = require(\"../utils\");\n\nconst codeMetadata_1 = require(\"./codeMetadata\");\n\nconst argSerializer_1 = require(\"./argSerializer\");\n\nexports.ArwenVirtualMachine = \"0500\";\n/**\n * A builder for {@link TransactionPayload} objects, to be used for Smart Contract deployment transactions.\n */\n\nclass ContractDeployPayloadBuilder {\n  constructor() {\n    this.code = null;\n    this.codeMetadata = new codeMetadata_1.CodeMetadata();\n    this.arguments = [];\n  }\n  /**\n   * Sets the code of the Smart Contract.\n   */\n\n\n  setCode(code) {\n    this.code = code;\n    return this;\n  }\n  /**\n   * Sets the code metadata of the Smart Contract.\n   */\n\n\n  setCodeMetadata(codeMetadata) {\n    this.codeMetadata = codeMetadata;\n    return this;\n  }\n  /**\n   * Adds constructor (`init`) arguments.\n   */\n\n\n  addInitArg(arg) {\n    this.arguments.push(arg);\n    return this;\n  }\n  /**\n   * Sets constructor (`init`) arguments.\n   */\n\n\n  setInitArgs(args) {\n    this.arguments = args;\n    return this;\n  }\n  /**\n   * Builds the {@link TransactionPayload}.\n   */\n\n\n  build() {\n    utils_1.guardValueIsSet(\"code\", this.code);\n    let code = this.code.toString();\n    let codeMetadata = this.codeMetadata.toString();\n    let data = `${code}@${exports.ArwenVirtualMachine}@${codeMetadata}`;\n    data = appendArgumentsToString(data, this.arguments);\n    return new transactionPayload_1.TransactionPayload(data);\n  }\n\n}\n\nexports.ContractDeployPayloadBuilder = ContractDeployPayloadBuilder;\n/**\n * A builder for {@link TransactionPayload} objects, to be used for Smart Contract upgrade transactions.\n */\n\nclass ContractUpgradePayloadBuilder {\n  constructor() {\n    this.code = null;\n    this.codeMetadata = new codeMetadata_1.CodeMetadata();\n    this.arguments = [];\n  }\n  /**\n   * Sets the code of the Smart Contract.\n   */\n\n\n  setCode(code) {\n    this.code = code;\n    return this;\n  }\n  /**\n   * Sets the code metadata of the Smart Contract.\n   */\n\n\n  setCodeMetadata(codeMetadata) {\n    this.codeMetadata = codeMetadata;\n    return this;\n  }\n  /**\n   * Adds upgrade (`init`) arguments.\n   */\n\n\n  addInitArg(arg) {\n    this.arguments.push(arg);\n    return this;\n  }\n  /**\n   * Sets upgrade (`init`) arguments.\n   */\n\n\n  setInitArgs(args) {\n    this.arguments = args;\n    return this;\n  }\n  /**\n   * Builds the {@link TransactionPayload}.\n   */\n\n\n  build() {\n    utils_1.guardValueIsSet(\"code\", this.code);\n    let code = this.code.toString();\n    let codeMetadata = this.codeMetadata.toString();\n    let data = `upgradeContract@${code}@${codeMetadata}`;\n    data = appendArgumentsToString(data, this.arguments);\n    return new transactionPayload_1.TransactionPayload(data);\n  }\n\n}\n\nexports.ContractUpgradePayloadBuilder = ContractUpgradePayloadBuilder;\n/**\n * A builder for {@link TransactionPayload} objects, to be used for Smart Contract execution transactions.\n */\n\nclass ContractCallPayloadBuilder {\n  constructor() {\n    this.contractFunction = null;\n    this.arguments = [];\n  }\n  /**\n   * Sets the function to be called (executed).\n   */\n\n\n  setFunction(contractFunction) {\n    this.contractFunction = contractFunction;\n    return this;\n  }\n  /**\n   * Adds a function argument.\n   */\n\n\n  addArg(arg) {\n    this.arguments.push(arg);\n    return this;\n  }\n  /**\n   * Sets the function arguments.\n   */\n\n\n  setArgs(args) {\n    this.arguments = args;\n    return this;\n  }\n  /**\n   * Builds the {@link TransactionPayload}.\n   */\n\n\n  build() {\n    utils_1.guardValueIsSet(\"calledFunction\", this.contractFunction);\n    let data = this.contractFunction.name;\n    data = appendArgumentsToString(data, this.arguments);\n    return new transactionPayload_1.TransactionPayload(data);\n  }\n\n}\n\nexports.ContractCallPayloadBuilder = ContractCallPayloadBuilder;\n\nfunction appendArgumentsToString(to, values) {\n  let {\n    argumentsString,\n    count\n  } = new argSerializer_1.ArgSerializer().valuesToString(values);\n\n  if (count == 0) {\n    return to;\n  }\n\n  return `${to}@${argumentsString}`;\n}","map":{"version":3,"sources":["../../src/smartcontracts/transactionPayloadBuilders.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContractCallPayloadBuilder = exports.ContractUpgradePayloadBuilder = exports.ContractDeployPayloadBuilder = exports.ArwenVirtualMachine = void 0;\nconst transactionPayload_1 = require(\"../transactionPayload\");\nconst utils_1 = require(\"../utils\");\nconst codeMetadata_1 = require(\"./codeMetadata\");\nconst argSerializer_1 = require(\"./argSerializer\");\nexports.ArwenVirtualMachine = \"0500\";\n/**\n * A builder for {@link TransactionPayload} objects, to be used for Smart Contract deployment transactions.\n */\nclass ContractDeployPayloadBuilder {\n    constructor() {\n        this.code = null;\n        this.codeMetadata = new codeMetadata_1.CodeMetadata();\n        this.arguments = [];\n    }\n    /**\n     * Sets the code of the Smart Contract.\n     */\n    setCode(code) {\n        this.code = code;\n        return this;\n    }\n    /**\n     * Sets the code metadata of the Smart Contract.\n     */\n    setCodeMetadata(codeMetadata) {\n        this.codeMetadata = codeMetadata;\n        return this;\n    }\n    /**\n     * Adds constructor (`init`) arguments.\n     */\n    addInitArg(arg) {\n        this.arguments.push(arg);\n        return this;\n    }\n    /**\n     * Sets constructor (`init`) arguments.\n     */\n    setInitArgs(args) {\n        this.arguments = args;\n        return this;\n    }\n    /**\n     * Builds the {@link TransactionPayload}.\n     */\n    build() {\n        utils_1.guardValueIsSet(\"code\", this.code);\n        let code = this.code.toString();\n        let codeMetadata = this.codeMetadata.toString();\n        let data = `${code}@${exports.ArwenVirtualMachine}@${codeMetadata}`;\n        data = appendArgumentsToString(data, this.arguments);\n        return new transactionPayload_1.TransactionPayload(data);\n    }\n}\nexports.ContractDeployPayloadBuilder = ContractDeployPayloadBuilder;\n/**\n * A builder for {@link TransactionPayload} objects, to be used for Smart Contract upgrade transactions.\n */\nclass ContractUpgradePayloadBuilder {\n    constructor() {\n        this.code = null;\n        this.codeMetadata = new codeMetadata_1.CodeMetadata();\n        this.arguments = [];\n    }\n    /**\n     * Sets the code of the Smart Contract.\n     */\n    setCode(code) {\n        this.code = code;\n        return this;\n    }\n    /**\n     * Sets the code metadata of the Smart Contract.\n     */\n    setCodeMetadata(codeMetadata) {\n        this.codeMetadata = codeMetadata;\n        return this;\n    }\n    /**\n     * Adds upgrade (`init`) arguments.\n     */\n    addInitArg(arg) {\n        this.arguments.push(arg);\n        return this;\n    }\n    /**\n     * Sets upgrade (`init`) arguments.\n     */\n    setInitArgs(args) {\n        this.arguments = args;\n        return this;\n    }\n    /**\n     * Builds the {@link TransactionPayload}.\n     */\n    build() {\n        utils_1.guardValueIsSet(\"code\", this.code);\n        let code = this.code.toString();\n        let codeMetadata = this.codeMetadata.toString();\n        let data = `upgradeContract@${code}@${codeMetadata}`;\n        data = appendArgumentsToString(data, this.arguments);\n        return new transactionPayload_1.TransactionPayload(data);\n    }\n}\nexports.ContractUpgradePayloadBuilder = ContractUpgradePayloadBuilder;\n/**\n * A builder for {@link TransactionPayload} objects, to be used for Smart Contract execution transactions.\n */\nclass ContractCallPayloadBuilder {\n    constructor() {\n        this.contractFunction = null;\n        this.arguments = [];\n    }\n    /**\n     * Sets the function to be called (executed).\n     */\n    setFunction(contractFunction) {\n        this.contractFunction = contractFunction;\n        return this;\n    }\n    /**\n     * Adds a function argument.\n     */\n    addArg(arg) {\n        this.arguments.push(arg);\n        return this;\n    }\n    /**\n     * Sets the function arguments.\n     */\n    setArgs(args) {\n        this.arguments = args;\n        return this;\n    }\n    /**\n     * Builds the {@link TransactionPayload}.\n     */\n    build() {\n        utils_1.guardValueIsSet(\"calledFunction\", this.contractFunction);\n        let data = this.contractFunction.name;\n        data = appendArgumentsToString(data, this.arguments);\n        return new transactionPayload_1.TransactionPayload(data);\n    }\n}\nexports.ContractCallPayloadBuilder = ContractCallPayloadBuilder;\nfunction appendArgumentsToString(to, values) {\n    let { argumentsString, count } = new argSerializer_1.ArgSerializer().valuesToString(values);\n    if (count == 0) {\n        return to;\n    }\n    return `${to}@${argumentsString}`;\n}\n//# sourceMappingURL=transactionPayloadBuilders.js.map"]},"metadata":{},"sourceType":"script"}