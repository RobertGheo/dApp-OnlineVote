{"ast":null,"code":"/**\n * Bundle of @devexpress/dx-react-core\n * Generated: 2022-02-24\n * Version: 3.0.2\n * License: https://js.devexpress.com/Licensing\n */\nimport { createContext, createElement, Children, PureComponent, Component, forwardRef, isValidElement, cloneElement, createRef, useContext } from 'react';\nimport { shallowEqual, PluginHost as PluginHost$1, EventEmitter } from '@devexpress/dx-core';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { shape, instanceOf } from 'prop-types';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n/** @deprecated */\n\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n}\n/** @internal */\n\n\nvar PluginHostContext = createContext(null);\n/** @internal */\n\nvar PositionContext = createContext(function () {\n  return [];\n});\n/** @internal */\n\nvar TemplateHostContext = createContext(null);\n/** @internal */\n\nvar PluginIndexer = /*#__PURE__*/function (_super) {\n  __extends(PluginIndexer, _super);\n\n  function PluginIndexer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.indexes = {};\n\n    _this.memoize = function (index, positionContext) {\n      if (_this.indexes[index]) return _this.indexes[index];\n\n      var fn = function () {\n        var calculatedPosition = positionContext();\n        return __spread(calculatedPosition, [index]);\n      };\n\n      _this.indexes[index] = fn;\n      return fn;\n    };\n\n    return _this;\n  }\n\n  PluginIndexer.prototype.render = function () {\n    var _this = this;\n\n    var children = this.props.children;\n    return createElement(PositionContext.Consumer, null, function (positionContext) {\n      return Children.map(children, function (child, index) {\n        if (!child || !child.type) return child;\n\n        var childPosition = _this.memoize(index, positionContext);\n\n        return createElement(PositionContext.Provider, {\n          key: String(index),\n          value: childPosition\n        }, child);\n      });\n    });\n  };\n\n  return PluginIndexer;\n}(PureComponent);\n/** @internal */\n\n\nvar PLUGIN_HOST_CONTEXT = 'dxcore_pluginHost_context';\n/** @internal */\n\nvar POSITION_CONTEXT = 'dxcore_position_context';\n/** @internal */\n\nvar TEMPLATE_HOST_CONTEXT = 'dxcore_templateHost_context';\n/** @internal */\n\nvar RERENDER_TEMPLATE_EVENT = Symbol('rerenderTemplate');\n/** @internal */\n\nvar RERENDER_TEMPLATE_SCOPE_EVENT = Symbol('rerenderTemplateScope');\n/** @internal */\n\nvar UPDATE_CONNECTION_EVENT = Symbol('updateConnection');\n/** @internal */\n\nvar withContext = function (Context, name) {\n  return function (Component) {\n    return function (props) {\n      return createElement(Context.Consumer, null, function (context) {\n        var _a;\n\n        return createElement(Component, __assign({}, props, (_a = {}, _a[name] = context, _a)));\n      });\n    };\n  };\n};\n/** @internal */\n\n\nvar withHostAndPosition = function (Component) {\n  return withContext(PluginHostContext, PLUGIN_HOST_CONTEXT)(withContext(PositionContext, POSITION_CONTEXT)(Component));\n};\n/** @internal */\n\n\nvar PluginBase = /*#__PURE__*/function (_super) {\n  __extends(PluginBase, _super);\n\n  function PluginBase() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PluginBase.prototype.componentDidMount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b],\n        _c = POSITION_CONTEXT,\n        position = _a[_c];\n    var _d = this.props,\n        name = _d.name,\n        dependencies = _d.dependencies;\n    this.plugin = {\n      position: position,\n      name: name,\n      dependencies: dependencies,\n      container: true\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.ensureDependencies();\n  };\n\n  PluginBase.prototype.componentDidUpdate = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.ensureDependencies();\n  };\n\n  PluginBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.unregisterPlugin(this.plugin);\n  };\n\n  PluginBase.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(PluginIndexer, null, children);\n  };\n\n  return PluginBase;\n}(PureComponent);\n\nvar Plugin = withHostAndPosition(PluginBase);\n\nvar getRenderingData = function (props) {\n  var name = props.name,\n      params = props.params;\n\n  if (name) {\n    var _a = props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    return {\n      params: params,\n      templates: pluginHost.collect(name + \"Template\").filter(function (template) {\n        return template.predicate(params);\n      }).reverse()\n    };\n  }\n\n  var _c = props,\n      _d = TEMPLATE_HOST_CONTEXT,\n      templateHost = _c[_d];\n  return {\n    params: params || templateHost.params(),\n    templates: templateHost.templates()\n  };\n};\n\nvar TemplatePlaceholderBase = /*#__PURE__*/function (_super) {\n  __extends(TemplatePlaceholderBase, _super);\n\n  function TemplatePlaceholderBase() {\n    var _a;\n\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.subscription = (_a = {}, _a[RERENDER_TEMPLATE_EVENT] = function (id) {\n      if (_this.template && _this.template.id === id) {\n        _this.forceUpdate();\n      }\n    }, _a[RERENDER_TEMPLATE_SCOPE_EVENT] = function (name) {\n      var propsName = _this.props.name;\n\n      if (propsName === name) {\n        _this.forceUpdate();\n      }\n    }, _a);\n    _this.template = null;\n    _this.params = {};\n    return _this;\n  }\n\n  TemplatePlaceholderBase.prototype.componentDidMount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.registerSubscription(this.subscription);\n  };\n\n  TemplatePlaceholderBase.prototype.shouldComponentUpdate = function (nextProps) {\n    var _a = getRenderingData(nextProps),\n        params = _a.params,\n        templates = _a.templates;\n\n    var _b = __read(templates, 1),\n        template = _b[0];\n\n    var children = this.props.children;\n    return children !== nextProps.children || templates.length > 1 || this.template !== template || !shallowEqual(this.params, params);\n  };\n\n  TemplatePlaceholderBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.unregisterSubscription(this.subscription);\n  };\n\n  TemplatePlaceholderBase.prototype.render = function () {\n    var _a;\n\n    var _this = this;\n\n    var _b = getRenderingData(this.props),\n        params = _b.params,\n        templates = _b.templates;\n\n    this.params = params;\n    _a = __read(templates, 1), this.template = _a[0];\n    var restTemplates = templates.slice(1);\n    var content = null;\n\n    if (this.template) {\n      var templateContent = this.template.children;\n      content = templateContent() || null;\n\n      if (content && typeof content === 'function') {\n        content = content(params);\n      }\n    }\n\n    var templatePlaceholder = this.props.children;\n    return createElement(TemplateHostContext.Provider, {\n      value: {\n        templates: function () {\n          return restTemplates;\n        },\n        params: function () {\n          return _this.params;\n        }\n      }\n    }, templatePlaceholder ? templatePlaceholder(content) : content);\n  };\n\n  return TemplatePlaceholderBase;\n}(Component);\n/** A React component to which a related Template is rendered. */\n\n\nvar TemplatePlaceholder = withContext(PluginHostContext, PLUGIN_HOST_CONTEXT)(withContext(TemplateHostContext, TEMPLATE_HOST_CONTEXT)(TemplatePlaceholderBase));\n\nvar PlaceholderWithRef = function (_a) {\n  var params = _a.params,\n      forwardedRef = _a.forwardedRef;\n  return createElement(TemplatePlaceholder, {\n    params: __assign(__assign({}, params), {\n      forwardedRef: forwardedRef\n    })\n  });\n};\n/** @internal */\n\n\nvar PluginHostBase = /*#__PURE__*/function (_super) {\n  __extends(PluginHostBase, _super);\n\n  function PluginHostBase(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.host = new PluginHost$1();\n    return _this;\n  }\n\n  PluginHostBase.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(PluginHostContext.Provider, {\n      value: this.host\n    }, createElement(PluginIndexer, null, children), createElement(TemplatePlaceholder, {\n      name: \"root\"\n    }));\n  };\n\n  return PluginHostBase;\n}(PureComponent);\n\nvar PluginHost = PluginHostBase;\n/** @internal */\n\nvar getAvailableGetters = function (pluginHost, getGetterValue) {\n  if (getGetterValue === void 0) {\n    getGetterValue = function (getterName) {\n      return pluginHost.get(getterName + \"Getter\");\n    };\n  }\n\n  var trackedDependencies = {};\n  var getters;\n\n  if (typeof Proxy !== 'undefined') {\n    getters = new Proxy({}, {\n      get: function (target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        var result = getGetterValue(prop);\n        trackedDependencies[prop] = result;\n        return result;\n      },\n      getOwnPropertyDescriptor: function (target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get(target, prop, undefined)\n        };\n      },\n      ownKeys: function () {\n        return pluginHost.knownKeys('Getter');\n      }\n    });\n  } else {\n    getters = pluginHost.knownKeys('Getter').reduce(function (acc, getterName) {\n      Object.defineProperty(acc, getterName, {\n        get: function () {\n          var result = getGetterValue(getterName);\n          trackedDependencies[getterName] = result;\n          return result;\n        }\n      });\n      return acc;\n    }, {});\n  }\n\n  return {\n    getters: getters,\n    trackedDependencies: trackedDependencies\n  };\n};\n/** @internal */\n\n\nvar isTrackedDependenciesChanged = function (pluginHost, prevTrackedDependencies, getGetterValue) {\n  if (getGetterValue === void 0) {\n    getGetterValue = function (getterName) {\n      return pluginHost.get(getterName + \"Getter\");\n    };\n  }\n\n  var trackedDependencies = Object.keys(prevTrackedDependencies) // tslint:disable-next-line: prefer-object-spread\n  .reduce(function (acc, getterName) {\n    var _a;\n\n    return Object.assign(acc, (_a = {}, _a[getterName] = getGetterValue(getterName), _a));\n  }, {});\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n/** @internal */\n\n\nvar getAvailableActions = function (pluginHost, getAction) {\n  if (getAction === void 0) {\n    getAction = function (actionName) {\n      return pluginHost.collect(actionName + \"Action\").slice().reverse()[0];\n    };\n  }\n\n  var actions;\n\n  if (typeof Proxy !== 'undefined') {\n    actions = new Proxy({}, {\n      get: function (target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        return getAction(prop);\n      },\n      getOwnPropertyDescriptor: function (target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get(target, prop, undefined)\n        };\n      },\n      ownKeys: function () {\n        return pluginHost.knownKeys('Action');\n      }\n    });\n  } else {\n    actions = pluginHost.knownKeys('Action').reduce(function (acc, actionName) {\n      Object.defineProperty(acc, actionName, {\n        get: function () {\n          return getAction(actionName);\n        }\n      });\n      return acc;\n    }, {});\n  }\n\n  return actions;\n};\n\nvar ActionBase = /*#__PURE__*/function (_super) {\n  __extends(ActionBase, _super);\n\n  function ActionBase(props) {\n    var _a;\n\n    var _this = _super.call(this, props) || this;\n\n    var _b = props,\n        _c = PLUGIN_HOST_CONTEXT,\n        pluginHost = _b[_c],\n        _d = POSITION_CONTEXT,\n        positionContext = _b[_d];\n    var name = props.name;\n    _this.plugin = (_a = {\n      position: function () {\n        return positionContext();\n      }\n    }, _a[name + \"Action\"] = function (params) {\n      var action = _this.props.action;\n      var getters = getAvailableGetters(pluginHost, function (getterName) {\n        return pluginHost.get(getterName + \"Getter\", _this.plugin);\n      }).getters;\n      var nextParams = params;\n      var actions = getAvailableActions(pluginHost, function (actionName) {\n        return actionName === name ? function (newParams) {\n          nextParams = newParams;\n        } : pluginHost.collect(actionName + \"Action\", _this.plugin).slice().reverse()[0];\n      });\n      action(params, getters, actions);\n      var nextAction = pluginHost.collect(name + \"Action\", _this.plugin).slice().reverse()[0];\n\n      if (nextAction) {\n        nextAction(nextParams);\n      }\n    }, _a);\n    pluginHost.registerPlugin(_this.plugin);\n    return _this;\n  }\n\n  ActionBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.unregisterPlugin(this.plugin);\n  };\n\n  ActionBase.prototype.render = function () {\n    return null;\n  };\n\n  return ActionBase;\n}(PureComponent);\n\nvar Action = withHostAndPosition(ActionBase);\n\nvar GetterBase = /*#__PURE__*/function (_super) {\n  __extends(GetterBase, _super);\n\n  function GetterBase(props) {\n    var _a;\n\n    var _this = _super.call(this, props) || this;\n\n    var _b = props,\n        _c = PLUGIN_HOST_CONTEXT,\n        pluginHost = _b[_c],\n        _d = POSITION_CONTEXT,\n        positionContext = _b[_d];\n    var name = props.name;\n    var lastComputed;\n    var lastTrackedDependencies = {};\n    var lastResult;\n    _this.plugin = (_a = {\n      position: function () {\n        return positionContext();\n      }\n    }, _a[name + \"Getter\"] = function (original) {\n      var _a = _this.props,\n          value = _a.value,\n          computed = _a.computed;\n      if (computed === undefined) return value;\n\n      var getGetterValue = function (getterName) {\n        return getterName === name ? original : pluginHost.get(getterName + \"Getter\", _this.plugin);\n      };\n\n      if (computed === lastComputed && !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n        return lastResult;\n      }\n\n      var _b = getAvailableGetters(pluginHost, getGetterValue),\n          getters = _b.getters,\n          trackedDependencies = _b.trackedDependencies;\n\n      var actions = getAvailableActions(pluginHost);\n      lastComputed = computed;\n      lastTrackedDependencies = trackedDependencies;\n      lastResult = computed(getters, actions);\n      return lastResult;\n    }, _a);\n    pluginHost.registerPlugin(_this.plugin);\n    return _this;\n  }\n\n  GetterBase.prototype.componentDidUpdate = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.broadcast(UPDATE_CONNECTION_EVENT);\n  };\n\n  GetterBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.unregisterPlugin(this.plugin);\n  };\n\n  GetterBase.prototype.render = function () {\n    return null;\n  };\n\n  return GetterBase;\n}(PureComponent);\n\nvar Getter = withHostAndPosition(GetterBase);\nvar globalTemplateId = 0;\n/** @internal */\n\nvar TemplateBase = /*#__PURE__*/function (_super) {\n  __extends(TemplateBase, _super);\n\n  function TemplateBase(props) {\n    var _a;\n\n    var _this = _super.call(this, props) || this;\n\n    _this.children = function () {\n      return void 0;\n    };\n\n    globalTemplateId += 1;\n    _this.id = globalTemplateId;\n    var _b = props,\n        _c = PLUGIN_HOST_CONTEXT,\n        pluginHost = _b[_c],\n        _d = POSITION_CONTEXT,\n        positionContext = _b[_d];\n    var name = props.name,\n        predicate = props.predicate;\n    _this.plugin = (_a = {\n      position: function () {\n        return positionContext();\n      }\n    }, _a[name + \"Template\"] = {\n      id: _this.id,\n      predicate: function (params) {\n        return predicate ? predicate(params) : true;\n      },\n      children: function () {\n        var children = _this.props.children;\n        return children;\n      }\n    }, _a);\n    pluginHost.registerPlugin(_this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n    return _this;\n  }\n\n  TemplateBase.prototype.componentDidUpdate = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    pluginHost.broadcast(RERENDER_TEMPLATE_EVENT, this.id);\n  };\n\n  TemplateBase.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        _b = PLUGIN_HOST_CONTEXT,\n        pluginHost = _a[_b];\n    var name = this.props.name;\n    pluginHost.unregisterPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  };\n\n  TemplateBase.prototype.render = function () {\n    return null;\n  };\n\n  return TemplateBase;\n}(PureComponent);\n/*** A React component that defines a markup that is rendered\r\n * as the corresponding TemplatePlaceholder.\r\n */\n\n\nvar Template = withHostAndPosition(TemplateBase);\n/** @internal */\n\nvar TemplateConnectorBase = /*#__PURE__*/function (_super) {\n  __extends(TemplateConnectorBase, _super);\n\n  function TemplateConnectorBase(props, context) {\n    var _a;\n\n    var _this = _super.call(this, props, context) || this;\n\n    _this.trackedDependencies = {};\n    _this.subscription = (_a = {}, _a[UPDATE_CONNECTION_EVENT] = function () {\n      return _this.updateConnection();\n    }, _a);\n    return _this;\n  }\n\n  TemplateConnectorBase.prototype.componentDidMount = function () {\n    var pluginHost = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  };\n\n  TemplateConnectorBase.prototype.componentWillUnmount = function () {\n    var pluginHost = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  };\n\n  TemplateConnectorBase.prototype.updateConnection = function () {\n    var pluginHost = this.context;\n\n    if (isTrackedDependenciesChanged(pluginHost, this.trackedDependencies)) {\n      this.forceUpdate();\n    }\n  };\n\n  TemplateConnectorBase.prototype.render = function () {\n    var pluginHost = this.context;\n    var children = this.props.children;\n\n    var _a = getAvailableGetters(pluginHost),\n        getters = _a.getters,\n        trackedDependencies = _a.trackedDependencies;\n\n    this.trackedDependencies = trackedDependencies;\n    var actions = getAvailableActions(pluginHost);\n    return children(getters, actions);\n  };\n\n  return TemplateConnectorBase;\n}(Component);\n\nTemplateConnectorBase.contextType = PluginHostContext;\n/** A React component that provides access to Getters and Actions within a Template. */\n\nvar TemplateConnector = TemplateConnectorBase;\nvar TIMEOUT = 180;\n/** @internal */\n\nvar TouchStrategy = /*#__PURE__*/function () {\n  function TouchStrategy(delegate) {\n    this.delegate = delegate;\n    this.touchStartTimeout = null;\n    this.dragging = false;\n  }\n\n  TouchStrategy.prototype.isDragging = function () {\n    return this.dragging;\n  };\n\n  TouchStrategy.prototype.isWaiting = function () {\n    return !!this.touchStartTimeout;\n  };\n\n  TouchStrategy.prototype.cancelWaiting = function () {\n    clearTimeout(this.touchStartTimeout);\n    this.touchStartTimeout = undefined;\n  };\n\n  TouchStrategy.prototype.start = function (e) {\n    var _this = this;\n\n    var _a = e.touches[0],\n        x = _a.clientX,\n        y = _a.clientY;\n    this.touchStartTimeout = setTimeout(function () {\n      _this.delegate.onStart({\n        x: x,\n        y: y\n      });\n\n      _this.dragging = true;\n    }, TIMEOUT);\n  };\n\n  TouchStrategy.prototype.move = function (e) {\n    this.cancelWaiting();\n\n    if (this.dragging) {\n      var _a = e.touches[0],\n          clientX = _a.clientX,\n          clientY = _a.clientY;\n      e.preventDefault();\n      this.delegate.onMove({\n        x: clientX,\n        y: clientY\n      });\n    }\n  };\n\n  TouchStrategy.prototype.end = function (e) {\n    this.cancelWaiting();\n\n    if (this.dragging) {\n      var _a = e.changedTouches[0],\n          clientX = _a.clientX,\n          clientY = _a.clientY;\n      this.delegate.onEnd({\n        x: clientX,\n        y: clientY\n      });\n    }\n\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  };\n\n  return TouchStrategy;\n}();\n/* globals document:true */\n\n\nvar gestureCover;\n/** @internal */\n\nvar toggleGestureCover = function (toggle, cursor) {\n  var style = {\n    pointerEvents: toggle ? 'all' : 'none'\n  };\n\n  if (toggle && cursor) {\n    style = __assign(__assign({}, style), {\n      cursor: cursor\n    });\n  }\n\n  if (!gestureCover) {\n    style = __assign(__assign({}, style), {\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      opacity: 0,\n      zIndex: 2147483647\n    });\n    gestureCover = document.createElement('div');\n    document.body.appendChild(gestureCover);\n  }\n\n  Object.keys(style).forEach(function (key) {\n    gestureCover.style[key] = style[key];\n  });\n};\n/* globals document:true window:true */\n\n/** @internal */\n\n\nvar clear = function () {\n  var selection = window.getSelection && window.getSelection();\n\n  if (selection) {\n    if (selection.empty) {\n      selection.empty();\n    } else if (selection.removeAllRanges) {\n      selection.removeAllRanges();\n    }\n  }\n};\n/* globals window:true document:true */\n\n\nvar BOUNDARY = 10;\n\nvar clamp = function (value, min, max) {\n  return Math.max(Math.min(value, max), min);\n};\n\nvar isBoundExceeded = function (_a, _b) {\n  var initialX = _a.x,\n      initialY = _a.y;\n  var x = _b.x,\n      y = _b.y;\n  return clamp(x, initialX - BOUNDARY, initialX + BOUNDARY) !== x || clamp(y, initialY - BOUNDARY, initialY + BOUNDARY) !== y;\n};\n/** @internal */\n\n\nvar MouseStrategy = /*#__PURE__*/function () {\n  function MouseStrategy(delegate) {\n    this.delegate = delegate;\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n\n  MouseStrategy.prototype.isDragging = function () {\n    return this.dragging;\n  };\n\n  MouseStrategy.prototype.start = function (e) {\n    var x = e.clientX,\n        y = e.clientY;\n    this.e = e;\n    this.mouseInitialOffset = {\n      x: x,\n      y: y\n    };\n  };\n\n  MouseStrategy.prototype.move = function (e) {\n    var x = e.clientX,\n        y = e.clientY;\n    var dragStarted = false;\n\n    if (!this.dragging && this.mouseInitialOffset) {\n      if (isBoundExceeded(this.mouseInitialOffset, {\n        x: x,\n        y: y\n      })) {\n        this.delegate.onStart(this.mouseInitialOffset);\n        clear();\n        dragStarted = true;\n        this.dragging = true;\n      }\n    }\n\n    if (this.dragging) {\n      e.preventDefault();\n      this.delegate.onMove({\n        x: x,\n        y: y\n      });\n    }\n\n    if (dragStarted) {\n      var element = document.elementFromPoint(x, y);\n      var cursor = element ? window.getComputedStyle(element).cursor : null;\n      toggleGestureCover(true, cursor);\n    }\n  };\n\n  MouseStrategy.prototype.end = function (e) {\n    if (this.dragging) {\n      var x = e.clientX,\n          y = e.clientY;\n      toggleGestureCover(false);\n      this.delegate.onEnd({\n        x: x,\n        y: y\n      });\n    }\n\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  };\n\n  return MouseStrategy;\n}();\n/* globals window:true */\n\n\nvar eventEmitter;\n/** @internal */\n\nvar getSharedEventEmitter = function () {\n  if (!eventEmitter) {\n    eventEmitter = new EventEmitter();\n    ['mousemove', 'mouseup', 'touchmove', 'touchend', 'touchcancel'].forEach(function (name) {\n      return window.addEventListener(name, function (e) {\n        return eventEmitter.emit([name, e]);\n      }, {\n        passive: false\n      });\n    });\n  }\n\n  return eventEmitter;\n};\n/** @internal */\n\n\nvar RefHolder = forwardRef(function (_a, ref) {\n  var _b;\n\n  var children = _a.children;\n  return isValidElement(children) ? typeof children.type === 'string' ? cloneElement(children, {\n    ref: ref\n  }) : cloneElement(children, {\n    forwardedRef: ((_b = children.props) === null || _b === void 0 ? void 0 : _b.forwardedRef) ? function (node) {\n      children.props.forwardedRef(node);\n\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    } : ref\n  }) : createElement('div', {\n    ref: ref,\n    style: {\n      display: 'contents'\n    }\n  }, children);\n});\nvar draggingHandled = Symbol('draggingHandled');\n/** @internal */\n\nvar Draggable = /*#__PURE__*/function (_super) {\n  __extends(Draggable, _super);\n\n  function Draggable(props) {\n    var _this = _super.call(this, props) || this;\n\n    var delegate = {\n      onStart: function (_a) {\n        var x = _a.x,\n            y = _a.y;\n        var onStart = _this.props.onStart;\n        if (!onStart) return;\n        unstable_batchedUpdates(function () {\n          onStart({\n            x: x,\n            y: y\n          });\n        });\n      },\n      onMove: function (_a) {\n        var x = _a.x,\n            y = _a.y;\n        var onUpdate = _this.props.onUpdate;\n        if (!onUpdate) return;\n        unstable_batchedUpdates(function () {\n          onUpdate({\n            x: x,\n            y: y\n          });\n        });\n      },\n      onEnd: function (_a) {\n        var x = _a.x,\n            y = _a.y;\n        var onEnd = _this.props.onEnd;\n        if (!onEnd) return;\n        unstable_batchedUpdates(function () {\n          onEnd({\n            x: x,\n            y: y\n          });\n        });\n      }\n    };\n    _this.mouseStrategy = new MouseStrategy(delegate);\n    _this.touchStrategy = new TouchStrategy(delegate);\n    _this.elementRef = createRef();\n    _this.mouseDownListener = _this.mouseDownListener.bind(_this);\n    _this.touchStartListener = _this.touchStartListener.bind(_this);\n    _this.globalListener = _this.globalListener.bind(_this);\n    return _this;\n  }\n\n  Draggable.prototype.componentDidMount = function () {\n    getSharedEventEmitter().subscribe(this.globalListener);\n    this.setupNodeSubscription();\n  };\n\n  Draggable.prototype.componentDidUpdate = function () {\n    this.setupNodeSubscription();\n  };\n\n  Draggable.prototype.componentWillUnmount = function () {\n    getSharedEventEmitter().unsubscribe(this.globalListener);\n  };\n\n  Draggable.prototype.setupNodeSubscription = function () {\n    var node = this.elementRef.current;\n    if (!node) return;\n    node.removeEventListener('mousedown', this.mouseDownListener);\n    node.removeEventListener('touchstart', this.touchStartListener);\n    node.addEventListener('mousedown', this.mouseDownListener);\n    node.addEventListener('touchstart', this.touchStartListener, {\n      passive: true\n    });\n  };\n\n  Draggable.prototype.mouseDownListener = function (e) {\n    if (this.touchStrategy.isWaiting() || e[draggingHandled]) return;\n    e.preventDefault();\n    this.mouseStrategy.start(e);\n    e[draggingHandled] = true;\n  };\n\n  Draggable.prototype.touchStartListener = function (e) {\n    if (e[draggingHandled]) return;\n    this.touchStrategy.start(e);\n    e[draggingHandled] = true;\n  };\n\n  Draggable.prototype.globalListener = function (_a) {\n    var _b = __read(_a, 2),\n        name = _b[0],\n        e = _b[1];\n\n    switch (name) {\n      case 'mousemove':\n        this.mouseStrategy.move(e);\n        break;\n\n      case 'mouseup':\n        this.mouseStrategy.end(e);\n        break;\n\n      case 'touchmove':\n        {\n          this.touchStrategy.move(e);\n          break;\n        }\n\n      case 'touchend':\n      case 'touchcancel':\n        {\n          this.touchStrategy.end(e);\n          break;\n        }\n    }\n\n    if (this.mouseStrategy.isDragging() || this.touchStrategy.isDragging()) {\n      clear();\n    }\n  };\n\n  Draggable.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        children = _a.children,\n        dragItem = _a.dragItem;\n    return createElement(RefHolder, {\n      ref: function (node) {\n        _this.elementRef.current = node;\n\n        if (typeof dragItem === 'function') {\n          dragItem(node);\n        } else if (dragItem) {\n          dragItem.current = node;\n        }\n      }\n    }, children);\n  };\n\n  return Draggable;\n}(PureComponent);\n/** @internal */\n\n\nvar DragDropContext = createContext(null);\n/** @internal */\n\nvar DragDropProviderCore = /*#__PURE__*/function () {\n  function DragDropProviderCore() {\n    this.payload = null;\n    this.dragEmitter = new EventEmitter();\n  }\n\n  DragDropProviderCore.prototype.start = function (payload, clientOffset) {\n    this.payload = payload;\n    this.dragEmitter.emit({\n      clientOffset: clientOffset,\n      payload: this.payload\n    });\n  };\n\n  DragDropProviderCore.prototype.update = function (clientOffset) {\n    this.dragEmitter.emit({\n      clientOffset: clientOffset,\n      payload: this.payload\n    });\n  };\n\n  DragDropProviderCore.prototype.end = function (clientOffset) {\n    this.dragEmitter.emit({\n      clientOffset: clientOffset,\n      payload: this.payload,\n      end: true\n    });\n    this.payload = null;\n  };\n\n  return DragDropProviderCore;\n}();\n\nvar defaultProps = {\n  onChange: function (_a) {\n    var payload = _a.payload,\n        clientOffset = _a.clientOffset;\n  }\n};\n/** @internal */\n// tslint:disable-next-line: max-classes-per-file\n\nvar DragDropProvider = /*#__PURE__*/function (_super) {\n  __extends(DragDropProvider, _super);\n\n  function DragDropProvider(props) {\n    var _this = _super.call(this, props) || this;\n\n    var onChange = _this.props.onChange;\n    _this.dragDropProvider = new DragDropProviderCore();\n\n    _this.dragDropProvider.dragEmitter.subscribe(function (_a) {\n      var payload = _a.payload,\n          clientOffset = _a.clientOffset,\n          end = _a.end;\n      onChange({\n        payload: end ? null : payload,\n        clientOffset: end ? null : clientOffset\n      });\n    });\n\n    return _this;\n  }\n\n  DragDropProvider.prototype.shouldComponentUpdate = function (nextProps) {\n    var children = this.props.children;\n    return nextProps.children !== children;\n  };\n\n  DragDropProvider.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(DragDropContext.Provider, {\n      value: this.dragDropProvider\n    }, children);\n  };\n\n  DragDropProvider.defaultProps = defaultProps;\n  return DragDropProvider;\n}(Component);\n\nvar defaultProps$1 = {\n  onStart: function (_a) {\n    var clientOffset = _a.clientOffset;\n  },\n  onUpdate: function (_a) {\n    var clientOffset = _a.clientOffset;\n  },\n  onEnd: function (_a) {\n    var clientOffset = _a.clientOffset;\n  }\n};\n/** @internal */\n\nvar DragSource = forwardRef(function (_a, ref) {\n  var onStart = _a.onStart,\n      onUpdate = _a.onUpdate,\n      onEnd = _a.onEnd,\n      payload = _a.payload,\n      children = _a.children;\n  var context = useContext(DragDropContext);\n  var dragDropProvider = context;\n  return createElement(Draggable, {\n    onStart: function (_a) {\n      var x = _a.x,\n          y = _a.y;\n      dragDropProvider === null || dragDropProvider === void 0 ? void 0 : dragDropProvider.start(payload, {\n        x: x,\n        y: y\n      });\n      onStart === null || onStart === void 0 ? void 0 : onStart({\n        clientOffset: {\n          x: x,\n          y: y\n        }\n      });\n    },\n    onUpdate: function (_a) {\n      var x = _a.x,\n          y = _a.y;\n      dragDropProvider === null || dragDropProvider === void 0 ? void 0 : dragDropProvider.update({\n        x: x,\n        y: y\n      });\n      onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate({\n        clientOffset: {\n          x: x,\n          y: y\n        }\n      });\n    },\n    onEnd: function (_a) {\n      var x = _a.x,\n          y = _a.y;\n      dragDropProvider === null || dragDropProvider === void 0 ? void 0 : dragDropProvider.end({\n        x: x,\n        y: y\n      });\n      onEnd === null || onEnd === void 0 ? void 0 : onEnd({\n        clientOffset: {\n          x: x,\n          y: y\n        }\n      });\n    },\n    dragItem: ref\n  }, children);\n});\nDragSource.defaultProps = defaultProps$1;\n\nvar clamp$1 = function (value, min, max) {\n  return Math.max(Math.min(value, max), min);\n};\n\nvar defaultProps$2 = {\n  onEnter: function (args) {},\n  onOver: function (args) {},\n  onLeave: function (args) {},\n  onDrop: function (args) {}\n};\n/** @internal */\n\nvar DropTarget = /*#__PURE__*/function (_super) {\n  __extends(DropTarget, _super);\n\n  function DropTarget(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.isOver = false;\n    _this.handleDrag = _this.handleDrag.bind(_this);\n    _this.elementRef = createRef();\n    return _this;\n  }\n\n  DropTarget.prototype.componentDidMount = function () {\n    var dragEmitter = this.context.dragEmitter;\n    dragEmitter.subscribe(this.handleDrag);\n  };\n\n  DropTarget.prototype.shouldComponentUpdate = function (nextProps) {\n    var children = this.props.children;\n    return nextProps.children !== children;\n  };\n\n  DropTarget.prototype.componentWillUnmount = function () {\n    var dragEmitter = this.context.dragEmitter;\n    dragEmitter.unsubscribe(this.handleDrag);\n  };\n\n  DropTarget.prototype.handleDrag = function (_a) {\n    var payload = _a.payload,\n        clientOffset = _a.clientOffset,\n        end = _a.end;\n\n    var _b = this.elementRef.current.getBoundingClientRect(),\n        left = _b.left,\n        top = _b.top,\n        right = _b.right,\n        bottom = _b.bottom;\n\n    var _c = this.props,\n        onDrop = _c.onDrop,\n        onEnter = _c.onEnter,\n        onLeave = _c.onLeave,\n        onOver = _c.onOver;\n    var isOver = clientOffset && clamp$1(clientOffset.x, left, right) === clientOffset.x && clamp$1(clientOffset.y, top, bottom) === clientOffset.y;\n    if (!this.isOver && isOver) onEnter({\n      payload: payload,\n      clientOffset: clientOffset\n    });\n    if (this.isOver && isOver) onOver({\n      payload: payload,\n      clientOffset: clientOffset\n    });\n    if (this.isOver && !isOver) onLeave({\n      payload: payload,\n      clientOffset: clientOffset\n    });\n    if (isOver && end) onDrop({\n      payload: payload,\n      clientOffset: clientOffset\n    });\n    this.isOver = isOver && !end;\n  };\n\n  DropTarget.prototype.render = function () {\n    var children = this.props.children;\n    return createElement(RefHolder, {\n      ref: this.elementRef\n    }, Children.only(children));\n  };\n\n  DropTarget.defaultProps = defaultProps$2;\n  return DropTarget;\n}(Component);\n\nDropTarget.contextType = DragDropContext;\n/* globals document:true */\n\nvar styles = {\n  root: {\n    position: 'relative'\n  },\n  triggersRoot: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    zIndex: -1,\n    visibility: 'hidden',\n    opacity: 0\n  },\n  expandTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto'\n  },\n  contractTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n    minHeight: '1px',\n    minWidth: '1px'\n  },\n  contractNotifier: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '200%',\n    height: '200%',\n    minHeight: '2px',\n    minWidth: '2px'\n  }\n};\n/** @internal */\n\nvar Sizer = /*#__PURE__*/function (_super) {\n  __extends(Sizer, _super);\n\n  function Sizer(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.getSize = function () {\n      return {\n        height: _this.rootNode.clientHeight,\n        width: _this.rootNode.clientWidth\n      };\n    };\n\n    _this.setupListeners = _this.setupListeners.bind(_this);\n    _this.rootRef = createRef();\n    return _this;\n  }\n\n  Sizer.prototype.componentDidMount = function () {\n    this.createListeners();\n    this.setupListeners();\n  };\n\n  Sizer.prototype.componentDidUpdate = function () {\n    // We can scroll the VirtualTable manually only by changing\n    // containter's (rootNode) scrollTop property.\n    // Viewport changes its own properties automatically.\n    var _a = this.props,\n        scrollTop = _a.scrollTop,\n        scrollLeft = _a.scrollLeft;\n\n    if (scrollTop > -1) {\n      this.rootNode.scrollTop = scrollTop;\n    }\n\n    if (scrollLeft > -1) {\n      this.rootNode.scrollLeft = scrollLeft;\n    }\n  }; // There is no need to remove listeners as divs are removed from DOM when component is unmount.\n  // But there is a little chance that component unmounting and 'scroll' event happen roughly\n  // at the same time so that `setupListeners` is called after component is unmount.\n\n\n  Sizer.prototype.componentWillUnmount = function () {\n    this.expandTrigger.removeEventListener('scroll', this.setupListeners);\n    this.contractTrigger.removeEventListener('scroll', this.setupListeners);\n  };\n\n  Sizer.prototype.setupListeners = function () {\n    var size = this.getSize();\n    var width = size.width,\n        height = size.height;\n    this.contractTrigger.scrollTop = height;\n    this.contractTrigger.scrollLeft = width;\n    var scrollOffset = 2;\n    this.expandNotifier.style.width = width + scrollOffset + \"px\";\n    this.expandNotifier.style.height = height + scrollOffset + \"px\";\n    this.expandTrigger.scrollTop = scrollOffset;\n    this.expandTrigger.scrollLeft = scrollOffset;\n    var onSizeChange = this.props.onSizeChange;\n    onSizeChange(size);\n  };\n\n  Sizer.prototype.createListeners = function () {\n    this.rootNode = this.rootRef.current;\n    this.triggersRoot = document.createElement('div');\n    Object.assign(this.triggersRoot.style, styles.triggersRoot);\n    this.rootNode.appendChild(this.triggersRoot);\n    this.expandTrigger = document.createElement('div');\n    Object.assign(this.expandTrigger.style, styles.expandTrigger);\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.expandTrigger);\n    this.expandNotifier = document.createElement('div');\n    this.expandTrigger.appendChild(this.expandNotifier);\n    this.contractTrigger = document.createElement('div');\n    Object.assign(this.contractTrigger.style, styles.contractTrigger);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.contractTrigger);\n    this.contractNotifier = document.createElement('div');\n    Object.assign(this.contractNotifier.style, styles.contractNotifier);\n    this.contractTrigger.appendChild(this.contractNotifier);\n  };\n\n  Sizer.prototype.render = function () {\n    var _a = this.props,\n        onSizeChange = _a.onSizeChange,\n        Container = _a.containerComponent,\n        style = _a.style,\n        scrollTop = _a.scrollTop,\n        scrollLeft = _a.scrollLeft,\n        restProps = __rest(_a, [\"onSizeChange\", \"containerComponent\", \"style\", \"scrollTop\", \"scrollLeft\"]);\n\n    return createElement(Container // NOTE: should have `position: relative`\n    , __assign({\n      forwardedRef: this.rootRef,\n      style: style ? __assign(__assign({}, styles.root), style) : styles.root\n    }, restProps));\n  };\n\n  Sizer.defaultProps = {\n    containerComponent: 'div'\n  };\n  return Sizer;\n}(PureComponent);\n/*** A function that creates a new component that allows you to pass additional properties\r\n * to the wrapped component.\r\n */\n\n\nvar connectProps = function (WrappedComponent, getAdditionalProps) {\n  var storedAdditionalProps = getAdditionalProps();\n  var components = new Set();\n\n  var RenderComponent = /*#__PURE__*/function (_super) {\n    __extends(RenderComponent, _super);\n\n    function RenderComponent() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    RenderComponent.prototype.componentDidMount = function () {\n      components.add(this);\n    };\n\n    RenderComponent.prototype.componentWillUnmount = function () {\n      components.delete(this);\n    };\n\n    RenderComponent.prototype.render = function () {\n      return createElement(WrappedComponent, __assign({}, this.props, storedAdditionalProps));\n    };\n\n    return RenderComponent;\n  }(PureComponent);\n\n  RenderComponent.update = function () {\n    storedAdditionalProps = getAdditionalProps();\n    Array.from(components.values()).forEach(function (component) {\n      return component.forceUpdate();\n    });\n  };\n\n  return RenderComponent;\n};\n/** @internal */\n\n\nvar createStateHelper = function (component, controlledStateProperties) {\n  if (controlledStateProperties === void 0) {\n    controlledStateProperties = {};\n  }\n\n  var notifyStateChange = function (nextState, state) {\n    Object.keys(controlledStateProperties).forEach(function (propertyName) {\n      var changeEvent = controlledStateProperties[propertyName]();\n\n      if (changeEvent && nextState[propertyName] !== state[propertyName]) {\n        changeEvent(nextState[propertyName]);\n      }\n    });\n  };\n\n  var lastStateUpdater;\n  var initialState = null;\n  var lastInitialState = null;\n  var newState = null;\n  var shouldNotify = false;\n\n  var applyReducer = function (reduce, payload, callback) {\n    var stateUpdater = function (prevState) {\n      if (initialState === null) {\n        initialState = prevState;\n      }\n\n      var stateChange = reduce(__assign({}, prevState), payload);\n\n      var state = __assign(__assign({}, prevState), stateChange);\n\n      if (typeof callback === 'function') {\n        callback(state, prevState);\n      }\n\n      if (stateUpdater === lastStateUpdater) {\n        if (lastInitialState !== initialState) {\n          newState = state;\n\n          if (!shouldNotify) {\n            lastInitialState = initialState;\n            shouldNotify = true;\n          }\n        }\n\n        initialState = null;\n      }\n\n      return stateChange;\n    };\n\n    lastStateUpdater = stateUpdater;\n    component.setState(stateUpdater, function () {\n      if (shouldNotify) {\n        notifyStateChange(newState, lastInitialState);\n        shouldNotify = false;\n      }\n    });\n  };\n\n  var applyFieldReducer = function (field, reduce, payload) {\n    applyReducer(function (state) {\n      var _a;\n\n      return _a = {}, _a[field] = reduce(state[field], payload), _a;\n    });\n  };\n\n  return {\n    applyReducer: applyReducer,\n    applyFieldReducer: applyFieldReducer\n  };\n};\n\nvar makeBoundComponent = function (Target, components, exposed) {\n  var Component = /*#__PURE__*/function (_super) {\n    __extends(Component, _super);\n\n    function Component() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    Component.prototype.render = function () {\n      return createElement(Target, __assign({}, components, this.props));\n    };\n\n    return Component;\n  }(PureComponent);\n\n  Component.components = Target.components;\n  Object.assign(Component, exposed);\n  return Component;\n}; // type ITargetComponentStatic = new() => ITargetComponent;\n\n/** @internal */\n\n\nvar withComponents = function (components) {\n  return function (Target) {\n    var props = {};\n    var exposed = {};\n    var targetComponents = Target.components;\n    Object.entries(targetComponents).forEach(function (_a) {\n      var _b = __read(_a, 2),\n          fieldName = _b[0],\n          componentName = _b[1];\n\n      var component = components[componentName];\n\n      if (component && component !== Target[componentName]) {\n        props[fieldName] = component;\n      }\n\n      exposed[componentName] = component || Target[componentName];\n    });\n    return Object.keys(props).length > 0 ? makeBoundComponent(Target, props, exposed) : Target;\n  };\n};\n/* globals Element */\n\n/** @internal */\n\n\nvar RefType = shape({\n  current: instanceOf(typeof Element !== 'undefined' ? Element : Object)\n});\nexport { Action, DragDropProvider, DragSource, Draggable, DropTarget, Getter, PlaceholderWithRef, Plugin, PluginHost, RefHolder, RefType, Sizer, Template, TemplateConnector, TemplatePlaceholder, clear as clearSelection, connectProps, createStateHelper, withComponents };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;;AACO,IAAMA,iBAAiB,GAAGC,aAAmB,CAAoB,IAApB,CAA7C;AACP;;AACO,IAAMC,eAAe,GAAGD,aAAmB,CAAmB;AAAM;AAAE,CAA3B,CAA3C;AACP;;AACO,IAAME,mBAAmB,GAAGF,aAAmB,CAA+B,IAA/B,CAA/C;ACHP;;AACA;AAAmCG;;AAAnC;AAAA;;AACEC,oBAAiD,EAAjD;;AACAA,oBAAoC,UAACC,KAAD,EAAQC,eAAR,EAAuB;AACzD,UAAIF,KAAI,CAACG,OAAL,CAAaF,KAAb,CAAJ,EAAyB,OAAOD,KAAI,CAACG,OAAL,CAAaF,KAAb,CAAP;;AAEzB,UAAMG,EAAE,GAAqB;AAC3B,YAAMC,kBAAkB,GAAGH,eAAe,EAA1C;AACA,wBAAWG,kBAAX,EAA6B,CAAEJ,KAAF,CAA7B;AACD,OAHD;;AAIAD,WAAI,CAACG,OAAL,CAAaF,KAAb,IAAsBG,EAAtB;AAEA,aAAOA,EAAP;AACD,KAVD;;;AA8BD;;AAnBCE;AAAA;;AACU,gBAAQ,GAAK,KAAKC,KAAL,CAAUC,QAAvB;AACR,WACEC,cAACZ,eAAe,CAACa,QAAjBD,EAAyB,IAAzBA,EACG,2BAAe;AAAI,aAClBE,QAAc,CAACC,GAAfD,CAAmBH,QAAnBG,EAA6B,UAACE,KAAD,EAAaZ,KAAb,EAA0B;AACrD,YAAI,CAACY,KAAD,IAAU,CAACA,KAAK,CAACC,IAArB,EAA2B,OAAOD,KAAP;;AAC3B,YAAME,aAAa,GAAGf,KAAI,CAACgB,OAAL,CAAaf,KAAb,EAAoBC,eAApB,CAAtB;;AAEA,eACEO,cAACZ,eAAe,CAACoB,QAAjBR,EAAyB;AAACS,aAAG,EAAEC,MAAM,CAAClB,KAAD,CAAZ;AAAqBmB,eAAK,EAAEL;AAA5B,SAAzBN,EACGI,KADHJ,CADF;AAKD,OATDE,CADkB;AAWnB,KAZHF,CADF;AAgBD,GAlBD;;AAmBF;AAAC,CAhCD,CAAmCY,aAAnC;ACZA;;;AACO,IAAMC,mBAAmB,GAAG,2BAA5B;AACP;;AACO,IAAMC,gBAAgB,GAAG,yBAAzB;AACP;;AACO,IAAMC,qBAAqB,GAAG,6BAA9B;AAEP;;AACO,IAAMC,uBAAuB,GAAGC,MAAM,CAAC,kBAAD,CAAtC;AACP;;AACO,IAAMC,6BAA6B,GAAGD,MAAM,CAAC,uBAAD,CAA5C;AACP;;AACO,IAAME,uBAAuB,GAAGF,MAAM,CAAC,kBAAD,CAAtC;ACRP;;AACO,IAAMG,WAAW,GAAG,UAACC,OAAD,EAAUC,IAAV,EAAc;AAAK,8BAAS;AAAI,4BAAK;AAAI,aAClEtB,cAACqB,OAAO,CAACpB,QAATD,EAAiB,IAAjBA,EACG,mBAAO;;;AAAI,eACVA,cAACuB,SAADvB,EAAUwB,aAAK1B,KAAL,GAAU2B,SAAQA,GAACH,IAAD,IAAQI,OAAhB,EAAuBD,EAAjC,EAAVzB,CADU;AAEX,OAHHA,CADkE;AAMnE,KAN0D;AAM1D,GAN6C;AAM7C,CANM;AAQP;;;AACA,IAAa2B,mBAAmB,GAAG,qBAAS;AAAI,oBAAW,CACzDzC,iBADyD,EAEzD2B,mBAFyD,CAAX,CAG9CO,WAAW,CAAChC,eAAD,EAAkB0B,gBAAlB,CAAX,CAA+CS,SAA/C,CAH8C;AAGY,CAH5D;ACCA;;;AACA;AAAgCjC;;AAAhC;;AAkCC;;AA/BCsC;AACU,QAAoEH,UAAK3B,KAAzE;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AAAA,QAAmCC,KAAChB,gBAApC;AAAA,QAAuDiB,QAAQ,SAA/D;AACF,aAAyB,KAAKjC,KAA9B;AAAA,QAAEwB,IAAI,UAAN;AAAA,QAAQU,YAAY,kBAApB;AACN,SAAKC,MAAL,GAAc;AACZF,cAAQ,UADI;AAEZT,UAAI,MAFQ;AAGZU,kBAAY,cAHA;AAIZE,eAAS,EAAE;AAJC,KAAd;AAMAL,cAAU,CAACM,cAAX,CAA0B,KAAKF,MAA/B;AACAJ,cAAU,CAACO,kBAAX;AACD,GAXD;;AAaAR;AACU,QAAsCH,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AACRA,cAAU,CAACO,kBAAX;AACD,GAHD;;AAKAR;AACU,QAAsCH,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AACRA,cAAU,CAACQ,gBAAX,CAA4B,KAAKJ,MAAjC;AACD,GAHD;;AAKAL;AACU,gBAAQ,GAAK,KAAK9B,KAAL,CAAUC,QAAvB;AACR,WACEC,cAACH,aAADG,EAAc,IAAdA,EACGD,QADHC,CADF;AAKD,GAPD;;AAQF;AAAC,CAlCD,CAAgCY,aAAhC;;IAoCa0B,MAAM,GAAqCX,mBAAmB,CAACC,UAAD;;AC5B3E,IAAMW,gBAAgB,GAAG,UAACzC,KAAD,EAAa;AAC5B,UAAI,GAAaA,KAAK,KAAtB;AAAA,MAAM0C,MAAM,GAAK1C,KAAK,OAAtB;;AACR,MAAIwB,IAAJ,EAAU;AACA,QAAsCG,UAAtC;AAAA,aAACZ,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AACR,WAAO;AACLW,YAAM,QADD;AAELC,eAAS,EAAEZ,UAAU,CAACa,OAAX,CAAsBpB,IAAI,aAA1B,EACRqB,MADQ,CACD,oBAAQ;AAAI,uBAAQ,CAACC,SAAT,CAAmBJ,MAAnB;AAA0B,OADrC,EAERK,OAFQ;AAFN,KAAP;AAMD;;AACO,MAA0Cf,UAA1C;AAAA,WAACf,qBAAD;AAAA,MAAyB+B,YAAY,SAArC;AACR,SAAO;AACLN,UAAM,EAAEA,MAAM,IAAIM,YAAY,CAACN,MAAb,EADb;AAELC,aAAS,EAAEK,YAAY,CAACL,SAAb;AAFN,GAAP;AAID,CAhBD;;AAkBA;AAAsCnD;;AAAtC;;;AAAA;;AACEC,0BAAYkC,SACVA,GAACT,uBAAD,IAA2B,UAAC+B,EAAD,EAAW;AACpC,UAAIxD,KAAI,CAACyD,QAAL,IAAiBzD,KAAI,CAACyD,QAAL,CAAcD,EAAd,KAAqBA,EAA1C,EAA8C;AAC5CxD,aAAI,CAAC0D,WAAL;AACD;AACF,KALS,EAMVxB,GAACP,6BAAD,IAAiC,UAACI,IAAD,EAAa;AACpC,UAAM4B,SAAS,GAAK3D,KAAI,CAACO,KAAL,CAAUwB,IAA9B;;AACR,UAAI4B,SAAS,KAAK5B,IAAlB,EAAwB;AACtB/B,aAAI,CAAC0D,WAAL;AACD;AACF,KAXS,IAAZ;AAaA1D,qBAAgC,IAAhC;AACAA,mBAAkB,EAAlB;;AAmDD;;AAjDC4D;AACU,QAAsC1B,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AACRA,cAAU,CAACuB,oBAAX,CAAgC,KAAKC,YAArC;AACD,GAHD;;AAKAF,sEAAsBG,SAAtB,EAAsC;AAC9B,aAAwBf,gBAAgB,CAACe,SAAD,CAAxC;AAAA,QAAEd,MAAM,YAAR;AAAA,QAAUC,SAAS,eAAnB;;AACA,oBAAaA,SAAb,EAAsB,CAAtB;AAAA,QAACO,QAAQ,QAAT;;AACE,gBAAQ,GAAK,KAAKlD,KAAL,CAAUC,QAAvB;AAER,WAAOA,QAAQ,KAAKuD,SAAS,CAACvD,QAAvB,IAAmC0C,SAAS,CAACc,MAAV,GAAmB,CAAtD,IACF,KAAKP,QAAL,KAAkBA,QADhB,IAEF,CAACQ,YAAY,CAAC,KAAKhB,MAAN,EAAcA,MAAd,CAFlB;AAGD,GARD;;AAUAW;AACU,QAAsC1B,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AACRA,cAAU,CAAC4B,sBAAX,CAAkC,KAAKJ,YAAvC;AACD,GAHD;;AAKAF;;;AAAA;;AACQ,aAAwBZ,gBAAgB,CAAC,KAAKzC,KAAN,CAAxC;AAAA,QAAE0C,MAAM,YAAR;AAAA,QAAUC,SAAS,eAAnB;;AAEN,SAAKD,MAAL,GAAcA,MAAd;AACAf,gBAAkBgB,SAAlB,EAA2B,CAA3B,GAAC,KAAKO,QAAL,GAAavB,KAAd;AACA,QAAMiC,aAAa,GAAGjB,SAAS,CAACkB,KAAV,CAAgB,CAAhB,CAAtB;AAEA,QAAIC,OAAO,GAA8B,IAAzC;;AACA,QAAI,KAAKZ,QAAT,EAAmB;AACT,UAAUa,eAAe,GAAK,KAAKb,QAAL,CAAajD,QAA3C;AAER6D,aAAO,GAAGC,eAAe,MAAM,IAA/B;;AACA,UAAID,OAAO,IAAI,OAAOA,OAAP,KAAmB,UAAlC,EAA8C;AAC5CA,eAAO,GAAGA,OAAO,CAACpB,MAAD,CAAjB;AACD;AACF;;AAEO,QAAUsB,mBAAmB,GAAK,KAAKhE,KAAL,CAAUC,QAA5C;AACR,WACEC,cAACX,mBAAmB,CAACmB,QAArBR,EAA6B;AAC3BW,WAAK,EAAE;AACL8B,iBAAS,EAAE;AAAM;AAAa,SADzB;AAELD,cAAM,EAAE;AAAM,sBAAI,CAACA,MAAL;AAAW;AAFpB;AADoB,KAA7BxC,EAMG8D,mBAAmB,GAAGA,mBAAmB,CAACF,OAAD,CAAtB,GAAkCA,OANxD5D,CADF;AAUD,GA5BD;;AA6BF;AAAC,CAlED,CAAsC+D,SAAtC;AAoEA;;;AACA,IAAaC,mBAAmB,GAAkD5C,WAAW,CAC3FlC,iBAD2F,EACxE2B,mBADwE,CAAX,CAGhFO,WAAW,CAAC/B,mBAAD,EAAsB0B,qBAAtB,CAAX,CAAwDoC,uBAAxD,CAHgF,CAAlF;;IAMac,kBAAkB,GAE1B,UAACxC,EAAD,EAAyB;MAAtBe,MAAM;MAAE0B,YAAY;AAAO,SACjClE,cAACgE,mBAADhE,EAAoB;AAClBwC,UAAM,wBACDA,MADC,GACK;AACT0B,kBAAY;AADH,KADL;AADY,GAApBlE,CADiC;AAOlC;ACnHD;;;AACA;AAA6BV;;AAG3B,0BAAYQ,KAAZ,EAAkC;AAAlC,gBACEqE,kBAAMrE,KAAN,KAAY,IADd;;AAGEP,SAAI,CAAC6E,IAAL,GAAY,IAAIC,YAAJ,EAAZ;;AACD;;AAEDC;AACU,gBAAQ,GAAK,KAAKxE,KAAL,CAAUC,QAAvB;AAER,WACEC,cAACd,iBAAiB,CAACsB,QAAnBR,EAA2B;AAACW,WAAK,EAAE,KAAKyD;AAAb,KAA3BpE,EACEA,cAACH,aAADG,EAAc,IAAdA,EACGD,QADHC,CADFA,EAIEA,cAACgE,mBAADhE,EAAoB;AAACsB,UAAI,EAAC;AAAN,KAApBtB,CAJFA,CADF;AAQD,GAXD;;AAYF;AAAC,CArBD,CAA6BY,aAA7B;;AAuBA,IAAa2D,UAAU,GAAyCD,cAAhE;ACjCA;;AACO,IAAME,mBAAmB,GAAG,UACjC3C,UADiC,EAEjC4C,cAFiC,EAEmC;AAApE;AAAAA,+BAAiBC,UAAjB,EAA2B;AAAI,uBAAU,CAACC,GAAX,CAAkBD,UAAU,WAA5B;AAAqC,KAApE;AAAoE;;AAEpE,MAAME,mBAAmB,GAAG,EAA5B;AAEA,MAAIC,OAAJ;;AACA,MAAI,OAAOC,KAAP,KAAiB,WAArB,EAAkC;AAChCD,WAAO,GAAG,IAAIC,KAAJ,CAAU,EAAV,EAAc;AACtBH,SAAG,YAACI,MAAD,EAASC,IAAT,EAAa;AACd,YAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B,OAAOC,SAAP;AAC9B,YAAMC,MAAM,GAAGT,cAAc,CAACO,IAAD,CAA7B;AACAJ,2BAAmB,CAACI,IAAD,CAAnB,GAA4BE,MAA5B;AACA,eAAOA,MAAP;AACD,OANqB;AAOtBC,8BAAwB,EAAxB,UAAyBJ,MAAzB,EAAiCC,IAAjC,EAAqC;AACnC,eAAO;AACLI,sBAAY,EAAE,IADT;AAELC,oBAAU,EAAE,IAFP;AAGL1E,eAAK,EAAE,KAAKgE,GAAL,CAAUI,MAAV,EAAyBC,IAAzB,EAA+BC,SAA/B;AAHF,SAAP;AAKD,OAbqB;AActBK,aAAO;AACL,eAAOzD,UAAU,CAAC0D,SAAX,CAAqB,QAArB,CAAP;AACD;AAhBqB,KAAd,CAAV;AAkBD,GAnBD,MAmBO;AACLV,WAAO,GAAGhD,UAAU,CAAC0D,SAAX,CAAqB,QAArB,EACPC,MADO,CACA,UAACC,GAAD,EAAMf,UAAN,EAAgB;AACtBgB,YAAM,CAACC,cAAP,CAAsBF,GAAtB,EAA2Bf,UAA3B,EAAuC;AACrCC,WAAG,EAAE;AACH,cAAMO,MAAM,GAAGT,cAAc,CAACC,UAAD,CAA7B;AACAE,6BAAmB,CAACF,UAAD,CAAnB,GAAkCQ,MAAlC;AACA,iBAAOA,MAAP;AACD;AALoC,OAAvC;AAOA,aAAOO,GAAP;AACD,KAVO,EAUL,EAVK,CAAV;AAWD;;AAED,SAAO;AAAEZ,WAAO,SAAT;AAAWD,uBAAmB;AAA9B,GAAP;AACD,CAzCM;AA2CP;;;AACA,IAAagB,4BAA4B,GAAG,UAC1C/D,UAD0C,EAE1CgE,uBAF0C,EAG1CpB,cAH0C,EAG0B;AAApE;AAAAA,+BAAiBC,UAAjB,EAA2B;AAAI,uBAAU,CAACC,GAAX,CAAkBD,UAAU,WAA5B;AAAqC,KAApE;AAAoE;;AAEpE,MAAME,mBAAmB,GAAGc,MAAM,CAACI,IAAP,CAAYD,uBAAZ;AAAA,GAEzBL,MAFyB,CAElB,UAACC,GAAD,EAAMf,UAAN,EAAgB;;;AAAK,iBAAM,CAACqB,MAAP,CAAcN,GAAd,GAAiBhE,SAC5CA,GAACiD,UAAD,IAAcD,cAAc,CAACC,UAAD,CADgB,IAAjB;AAE3B,GAJwB,EAItB,EAJsB,CAA5B;AAMA,SAAO,CAAClB,YAAY,CAACqC,uBAAD,EAA0BjB,mBAA1B,CAApB;AACD,CAZD;AAcA;;;AACO,IAAMoB,mBAAmB,GAAG,UACjCnE,UADiC,EAEjCoE,SAFiC,EAEuD;AAAxF;AAAAA,0BAAYC,UAAZ,EAAsB;AAAI,uBAAU,CAACxD,OAAX,CAAsBwD,UAAU,WAAhC,EAA0CvC,KAA1C,GAAkDd,OAAlD,GAA4D,CAA5D;AAA8D,KAAxF;AAAwF;;AAExF,MAAIsD,OAAJ;;AACA,MAAI,OAAOrB,KAAP,KAAiB,WAArB,EAAkC;AAChCqB,WAAO,GAAG,IAAIrB,KAAJ,CAAU,EAAV,EAAc;AACtBH,SAAG,YAACI,MAAD,EAASC,IAAT,EAAa;AACd,YAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B,OAAOC,SAAP;AAC9B,eAAOgB,SAAS,CAACjB,IAAD,CAAhB;AACD,OAJqB;AAKtBG,8BAAwB,EAAxB,UAAyBJ,MAAzB,EAAiCC,IAAjC,EAAqC;AACnC,eAAO;AACLI,sBAAY,EAAE,IADT;AAELC,oBAAU,EAAE,IAFP;AAGL1E,eAAK,EAAE,KAAKgE,GAAL,CAAUI,MAAV,EAAyBC,IAAzB,EAA+BC,SAA/B;AAHF,SAAP;AAKD,OAXqB;AAYtBK,aAAO;AACL,eAAOzD,UAAU,CAAC0D,SAAX,CAAqB,QAArB,CAAP;AACD;AAdqB,KAAd,CAAV;AAgBD,GAjBD,MAiBO;AACLY,WAAO,GAAGtE,UAAU,CAAC0D,SAAX,CAAqB,QAArB,EACPC,MADO,CACA,UAACC,GAAD,EAAMS,UAAN,EAAgB;AACtBR,YAAM,CAACC,cAAP,CAAsBF,GAAtB,EAA2BS,UAA3B,EAAuC;AACrCvB,WAAG,EAAE;AAAM,0BAAS,CAACuB,UAAD,CAAT;AAAqB;AADK,OAAvC;AAGA,aAAOT,GAAP;AACD,KANO,EAML,EANK,CAAV;AAOD;;AACD,SAAOU,OAAP;AACD,CAhCM;;AC5CP;AAAyB7G;;AAGvB,sBAAYQ,KAAZ,EAAiB;;;AAAjB,gBACEqE,kBAAMrE,KAAN,KAAY,IADd;;AAGU,QAA2EsG,UAA3E;AAAA,aAACvF,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AAAA,QAAmCwE,KAACvF,gBAApC;AAAA,QAAuDrB,eAAe,SAAtE;AACA,YAAI,GAAKK,KAAK,KAAd;AAERP,SAAI,CAAC0C,MAAL,IAAWR;AACTM,cAAQ,EAAE;AAAM,8BAAe,EAAf;AAAiB;AADxB,OAETN,GAAIH,IAAI,WAAR,IAAmB,UAACkB,MAAD,EAAO;AAChB,gBAAM,GAAKjD,KAAI,CAACO,KAAL,CAAUwG,MAArB;AACA,iBAAO,GAAK9B,mBAAmB,CACrC3C,UADqC,EAErC,sBAAU;AAAI,yBAAU,CAAC8C,GAAX,CAAkBD,UAAU,WAA5B,EAAsCnF,KAAI,CAAC0C,MAA3C;AAAkD,OAF3B,CAAnB,CAGnB4C,OAHO;AAIR,UAAI0B,UAAU,GAAG/D,MAAjB;AACA,UAAM2D,OAAO,GAAGH,mBAAmB,CACjCnE,UADiC,EAEjC,sBAAU;AAAI,eAACqE,UAAU,KAAK5E,IAAf,GACX,UAACkF,SAAD,EAAU;AAAOD,oBAAU,GAAGC,SAAb;AAAyB,SAD/B,GAEX3E,UAAU,CAACa,OAAX,CAAsBwD,UAAU,WAAhC,EAA0C3G,KAAI,CAAC0C,MAA/C,EAAuD0B,KAAvD,GAA+Dd,OAA/D,GAAyE,CAAzE,CAFU;AAEkE,OAJ/C,CAAnC;AAMAyD,YAAM,CAAC9D,MAAD,EAASqC,OAAT,EAAkBsB,OAAlB,CAAN;AACA,UAAMM,UAAU,GAAG5E,UAAU,CAACa,OAAX,CAAsBpB,IAAI,WAA1B,EAAoC/B,KAAI,CAAC0C,MAAzC,EAAiD0B,KAAjD,GAAyDd,OAAzD,GAAmE,CAAnE,CAAnB;;AACA,UAAI4D,UAAJ,EAAgB;AACdA,kBAAU,CAACF,UAAD,CAAV;AACD;AACF,KApBQ,IAAX;AAuBA1E,cAAU,CAACM,cAAX,CAA0B5C,KAAI,CAAC0C,MAA/B;;AACD;;AAEDyE;AACU,QAAsCjF,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AAERA,cAAU,CAACQ,gBAAX,CAA4B,KAAKJ,MAAjC;AACD,GAJD;;AAMAyE;AACE,WAAO,IAAP;AACD,GAFD;;AAGF;AAAC,CA5CD,CAAyB9F,aAAzB;;IA8Ca+F,MAAM,GAAqChF,mBAAmB,CAAC+E,UAAD;;ACxC3E;AAAyBpH;;AAGvB,sBAAYQ,KAAZ,EAAiB;;;AAAjB,gBACEqE,kBAAMrE,KAAN,KAAY,IADd;;AAGU,QAA2EsG,UAA3E;AAAA,aAACvF,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AAAA,QAAmCwE,KAACvF,gBAApC;AAAA,QAAuDrB,eAAe,SAAtE;AACA,YAAI,GAAKK,KAAK,KAAd;AAER,QAAI8G,YAAJ;AACA,QAAIC,uBAAuB,GAAG,EAA9B;AACA,QAAIC,UAAJ;AAEAvH,SAAI,CAAC0C,MAAL,IAAWR;AACTM,cAAQ,EAAE;AAAM,8BAAe,EAAf;AAAiB;AADxB,OAETN,GAAIH,IAAI,WAAR,IAAmB,UAACyF,QAAD,EAAS;AACpB,eAAsBxH,KAAI,CAACO,KAA3B;AAAA,UAAEa,KAAK,WAAP;AAAA,UAASqG,QAAQ,cAAjB;AACN,UAAIA,QAAQ,KAAK/B,SAAjB,EAA4B,OAAOtE,KAAP;;AAE5B,UAAM8D,cAAc,GAAG,sBAAU;AAAI,eAAEC,UAAU,KAAKpD,IAAhB,GAClCyF,QADkC,GAElClF,UAAU,CAAC8C,GAAX,CAAkBD,UAAU,WAA5B,EAAsCnF,KAAI,CAAC0C,MAA3C,CAFiC;AAEkB,OAFvD;;AAIA,UAAI+E,QAAQ,KAAKJ,YAAb,IACC,CAAChB,4BAA4B,CAAC/D,UAAD,EAAagF,uBAAb,EAAsCpC,cAAtC,CADlC,EACyF;AACvF,eAAOqC,UAAP;AACD;;AAEK,eAAmCtC,mBAAmB,CAAC3C,UAAD,EAAa4C,cAAb,CAAtD;AAAA,UAAEI,OAAO,aAAT;AAAA,UAAWD,mBAAmB,yBAA9B;;AACN,UAAMuB,OAAO,GAAGH,mBAAmB,CAACnE,UAAD,CAAnC;AAEA+E,kBAAY,GAAGI,QAAf;AACAH,6BAAuB,GAAGjC,mBAA1B;AACAkC,gBAAU,GAAGE,QAAQ,CAACnC,OAAD,EAAUsB,OAAV,CAArB;AACA,aAAOW,UAAP;AACD,KAtBQ,IAAX;AAyBAjF,cAAU,CAACM,cAAX,CAA0B5C,KAAI,CAAC0C,MAA/B;;AACD;;AAEDgF;AACU,QAAsCxF,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AAERA,cAAU,CAACqF,SAAX,CAAqB/F,uBAArB;AACD,GAJD;;AAMA8F;AACU,QAAsCxF,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AAERA,cAAU,CAACQ,gBAAX,CAA4B,KAAKJ,MAAjC;AACD,GAJD;;AAMAgF;AACE,WAAO,IAAP;AACD,GAFD;;AAGF;AAAC,CAxDD,CAAyBrG,aAAzB;;IA0DauG,MAAM,GAAqCxF,mBAAmB,CAACsF,UAAD;AC9D3E,IAAIG,gBAAgB,GAAG,CAAvB;AACA;;AACA;AAAkC9H;;AAKhC,wBAAYQ,KAAZ,EAAiB;;;AAAjB,gBACEqE,kBAAMrE,KAAN,KAAY,IADd;;AAGEP,SAAI,CAACQ,QAAL,GAAgB;AAAM,kBAAK,CAAL;AAAM,KAA5B;;AAEAqH,oBAAgB,IAAI,CAApB;AACA7H,SAAI,CAACwD,EAAL,GAAUqE,gBAAV;AAEQ,QAA2EhB,UAA3E;AAAA,aAACvF,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AAAA,QAAmCwE,KAACvF,gBAApC;AAAA,QAAuDrB,eAAe,SAAtE;AACA,YAAI,GAAgBK,KAAK,KAAzB;AAAA,QAAM8C,SAAS,GAAK9C,KAAK,UAAzB;AAERP,SAAI,CAAC0C,MAAL,IAAWR;AACTM,cAAQ,EAAE;AAAM,8BAAe,EAAf;AAAiB;AADxB,OAETN,GAAIH,IAAI,aAAR,IAAqB;AACnByB,QAAE,EAAExD,KAAI,CAACwD,EADU;AAEnBH,eAAS,EAAE,kBAAM;AAAI,eAACA,SAAS,GAAGA,SAAS,CAACJ,MAAD,CAAZ,GAAuB,IAAjC;AAAsC,OAFxC;AAGnBzC,cAAQ,EAAE;AACA,oBAAQ,GAAKR,KAAI,CAACO,KAAL,CAAUC,QAAvB;AACR,eAAOA,QAAP;AACD;AANkB,KAFZ,IAAX;AAWA8B,cAAU,CAACM,cAAX,CAA0B5C,KAAI,CAAC0C,MAA/B;AACAJ,cAAU,CAACqF,SAAX,CAAqBhG,6BAArB,EAAoDI,IAApD;;AACD;;AAED+F;AACU,QAAsC5F,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AACRA,cAAU,CAACqF,SAAX,CAAqBlG,uBAArB,EAA8C,KAAK+B,EAAnD;AACD,GAHD;;AAKAsE;AACU,QAAsC5F,UAAK3B,KAA3C;AAAA,aAACe,mBAAD;AAAA,QAAuBgB,UAAU,SAAjC;AACA,YAAI,GAAK,KAAK/B,KAAL,CAAUwB,IAAnB;AACRO,cAAU,CAACQ,gBAAX,CAA4B,KAAKJ,MAAjC;AACAJ,cAAU,CAACqF,SAAX,CAAqBhG,6BAArB,EAAoDI,IAApD;AACD,GALD;;AAOA+F;AACE,WAAO,IAAP;AACD,GAFD;;AAGF;AAAC,CA9CD,CAAkCzG,aAAlC;;;;;;IAmDa0G,QAAQ,GAAuC3F,mBAAmB,CAAC0F,YAAD;ACvD/E;;AACA;AAAoC/H;;AAIlC,iCAAYQ,KAAZ,EAAmB4B,OAAnB,EAA0B;;;AAA1B,gBACEyC,kBAAMrE,KAAN,EAAa4B,OAAb,KAAqB,IADvB;;AAGEnC,SAAI,CAACqF,mBAAL,GAA2B,EAA3B;AACArF,SAAI,CAAC8D,YAAL,IAAiB5B,SACfA,GAACN,uBAAD,IAA2B;AAAM,kBAAI,CAACoG,gBAAL;AAAuB,KADzC,IAAjB;;AAGD;;AAEDC;AACE,QAAM3F,UAAU,GAAG,KAAKH,OAAxB;AACAG,cAAU,CAACuB,oBAAX,CAAgC,KAAKC,YAArC;AACD,GAHD;;AAKAmE;AACE,QAAM3F,UAAU,GAAG,KAAKH,OAAxB;AACAG,cAAU,CAAC4B,sBAAX,CAAkC,KAAKJ,YAAvC;AACD,GAHD;;AAKAmE;AACE,QAAM3F,UAAU,GAAG,KAAKH,OAAxB;;AAEA,QAAIkE,4BAA4B,CAAC/D,UAAD,EAAa,KAAK+C,mBAAlB,CAAhC,EAAwE;AACtE,WAAK3B,WAAL;AACD;AACF,GAND;;AAQAuE;AACE,QAAM3F,UAAU,GAAG,KAAKH,OAAxB;AACQ,gBAAQ,GAAK,KAAK5B,KAAL,CAAUC,QAAvB;;AAEF,aAAmCyE,mBAAmB,CAAC3C,UAAD,CAAtD;AAAA,QAAEgD,OAAO,aAAT;AAAA,QAAWD,mBAAmB,yBAA9B;;AACN,SAAKA,mBAAL,GAA2BA,mBAA3B;AACA,QAAMuB,OAAO,GAAGH,mBAAmB,CAACnE,UAAD,CAAnC;AAEA,WAAO9B,QAAQ,CAAC8E,OAAD,EAAUsB,OAAV,CAAf;AACD,GATD;;AAUF;AAAC,CAzCD,CAAoCpC,SAApC;;AA2CAyD,qBAAqB,CAACC,WAAtB,GAAoCvI,iBAApC;AAEA;;AACA,IAAawI,iBAAiB,GAAgDF,qBAA9E;ACjEA,IAAMG,OAAO,GAAG,GAAhB;AAEA;;AACA;AAME,yBAAYC,QAAZ,EAAoB;AAClB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKC,iBAAL,GAAyB,IAAzB;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACD;;AAEDC;AACE,WAAO,KAAKD,QAAZ;AACD,GAFD;;AAIAC;AACE,WAAO,CAAC,CAAC,KAAKF,iBAAd;AACD,GAFD;;AAIAE;AACEC,gBAAY,CAAC,KAAKH,iBAAN,CAAZ;AACA,SAAKA,iBAAL,GAAyB5C,SAAzB;AACD,GAHD;;AAKA8C,4CAAME,CAAN,EAAO;AAAP;;AACQ,aAA6BA,CAAC,CAACC,OAAF,CAAU,CAAV,CAA7B;AAAA,QAAWC,CAAC,aAAZ;AAAA,QAAuBC,CAAC,aAAxB;AACN,SAAKP,iBAAL,GAAyBQ,UAAU,CAAC;AAClC9I,WAAI,CAACqI,QAAL,CAAcU,OAAd,CAAsB;AAAEH,SAAC,GAAH;AAAKC,SAAC;AAAN,OAAtB;;AACA7I,WAAI,CAACuI,QAAL,GAAgB,IAAhB;AACD,KAHkC,EAGhCH,OAHgC,CAAnC;AAID,GAND;;AAQAI,2CAAKE,CAAL,EAAM;AACJ,SAAKM,aAAL;;AACA,QAAI,KAAKT,QAAT,EAAmB;AACX,eAAuBG,CAAC,CAACC,OAAF,CAAU,CAAV,CAAvB;AAAA,UAAEM,OAAO,aAAT;AAAA,UAAWC,OAAO,aAAlB;AACNR,OAAC,CAACS,cAAF;AACA,WAAKd,QAAL,CAAce,MAAd,CAAqB;AAAER,SAAC,EAAEK,OAAL;AAAcJ,SAAC,EAAEK;AAAjB,OAArB;AACD;AACF,GAPD;;AASAV,0CAAIE,CAAJ,EAAK;AACH,SAAKM,aAAL;;AACA,QAAI,KAAKT,QAAT,EAAmB;AACX,eAAuBG,CAAC,CAACW,cAAF,CAAiB,CAAjB,CAAvB;AAAA,UAAEJ,OAAO,aAAT;AAAA,UAAWC,OAAO,aAAlB;AACN,WAAKb,QAAL,CAAciB,KAAd,CAAoB;AAAEV,SAAC,EAAEK,OAAL;AAAcJ,SAAC,EAAEK;AAAjB,OAApB;AACD;;AACD,SAAKK,kBAAL,GAA0B,IAA1B;AACA,SAAKhB,QAAL,GAAgB,KAAhB;AACD,GARD;;AASF;AAAC,CAnDD;ACHA;;;IAEIiB;AACJ;;AACO,IAAMC,kBAAkB,GAAG,UAACC,MAAD,EAASC,MAAT,EAAgB;AAChD,MAAIC,KAAK,GAAwB;AAC/BC,iBAAa,EAAEH,MAAM,GAAG,KAAH,GAAW;AADD,GAAjC;;AAGA,MAAIA,MAAM,IAAIC,MAAd,EAAsB;AACpBC,SAAK,yBACAA,KADA,GACK;AACRD,YAAM;AADE,KADL,CAAL;AAID;;AACD,MAAI,CAACH,YAAL,EAAmB;AACjBI,SAAK,yBACAA,KADA,GACK;AACRpH,cAAQ,EAAE,OADF;AAERsH,SAAG,EAAE,CAFG;AAGRC,WAAK,EAAE,CAHC;AAIRC,UAAI,EAAE,CAJE;AAKRC,YAAM,EAAE,CALA;AAMRC,aAAO,EAAE,CAND;AAORC,YAAM,EAAE;AAPA,KADL,CAAL;AAWAX,gBAAY,GAAGY,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAf;AACAD,YAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0Bf,YAA1B;AACD;;AACDrD,QAAM,CAACI,IAAP,CAAYqD,KAAZ,EAAmBY,OAAnB,CAA2B,UAACtJ,GAAD,EAAI;AAAOsI,gBAAY,CAACI,KAAb,CAAmB1I,GAAnB,IAA0B0I,KAAK,CAAC1I,GAAD,CAA/B;AAAuC,GAA7E;AACD,CA1BM;ACJP;;AAEA;;;AACA,IAAauJ,KAAK,GAAG;AACnB,MAAMC,SAAS,GAAGC,MAAM,CAACC,YAAP,IAAuBD,MAAM,CAACC,YAAP,EAAzC;;AAEA,MAAIF,SAAJ,EAAe;AACb,QAAIA,SAAS,CAACG,KAAd,EAAqB;AACnBH,eAAS,CAACG,KAAV;AACD,KAFD,MAEO,IAAIH,SAAS,CAACI,eAAd,EAA+B;AACpCJ,eAAS,CAACI,eAAV;AACD;AACF;AACF,CAVD;ACHA;;;AAKA,IAAMC,QAAQ,GAAG,EAAjB;;AACA,IAAMC,KAAK,GAAG,UAAC5J,KAAD,EAAQ6J,GAAR,EAAaC,GAAb,EAAgB;AAAK,aAAI,CAACA,GAAL,CAASC,IAAI,CAACF,GAAL,CAAS7J,KAAT,EAAgB8J,GAAhB,CAAT,EAA+BD,GAA/B;AAAmC,CAAtE;;AACA,IAAMG,eAAe,GAAG,UACtBlJ,EADsB,EACQ2E,EADR,EACgB;MAAjCwE,QAAQ;MAAKC,QAAQ;MAAM1C,CAAC;MAAEC,CAAC;AACjC,cAAK,CAACD,CAAD,EAAIyC,QAAQ,GAAGN,QAAf,EAAyBM,QAAQ,GAAGN,QAApC,CAAL,KAAuDnC,CAAvD,IACAoC,KAAK,CAACnC,CAAD,EAAIyC,QAAQ,GAAGP,QAAf,EAAyBO,QAAQ,GAAGP,QAApC,CAAL,KAAuDlC,CADvD;AACwD,CAH7D;AAKA;;;AACA;AAME,yBAAYR,QAAZ,EAAoB;AAClB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKkB,kBAAL,GAA0B,IAA1B;AACA,SAAKhB,QAAL,GAAgB,KAAhB;AACD;;AAEDgD;AACE,WAAO,KAAKhD,QAAZ;AACD,GAFD;;AAIAgD,4CAAM7C,CAAN,EAAO;AACG,QAASE,CAAC,GAAiBF,CAAC,QAA5B;AAAA,QAAqBG,CAAC,GAAKH,CAAC,QAA5B;AACR,SAAKA,CAAL,GAASA,CAAT;AACA,SAAKa,kBAAL,GAA0B;AAAEX,OAAC,GAAH;AAAKC,OAAC;AAAN,KAA1B;AACD,GAJD;;AAMA0C,2CAAK7C,CAAL,EAAM;AACI,QAASE,CAAC,GAAiBF,CAAC,QAA5B;AAAA,QAAqBG,CAAC,GAAKH,CAAC,QAA5B;AACR,QAAI8C,WAAW,GAAG,KAAlB;;AACA,QAAI,CAAC,KAAKjD,QAAN,IAAkB,KAAKgB,kBAA3B,EAA+C;AAC7C,UAAI6B,eAAe,CAAC,KAAK7B,kBAAN,EAA0B;AAAEX,SAAC,GAAH;AAAKC,SAAC;AAAN,OAA1B,CAAnB,EAAwD;AACtD,aAAKR,QAAL,CAAcU,OAAd,CAAsB,KAAKQ,kBAA3B;AACAkB,aAAK;AACLe,mBAAW,GAAG,IAAd;AACA,aAAKjD,QAAL,GAAgB,IAAhB;AACD;AACF;;AACD,QAAI,KAAKA,QAAT,EAAmB;AACjBG,OAAC,CAACS,cAAF;AACA,WAAKd,QAAL,CAAce,MAAd,CAAqB;AAAER,SAAC,GAAH;AAAKC,SAAC;AAAN,OAArB;AACD;;AACD,QAAI2C,WAAJ,EAAiB;AACf,UAAMC,OAAO,GAAGrB,QAAQ,CAACsB,gBAAT,CAA0B9C,CAA1B,EAA6BC,CAA7B,CAAhB;AACA,UAAMc,MAAM,GAAG8B,OAAO,GAAGd,MAAM,CAACgB,gBAAP,CAAwBF,OAAxB,EAAiC9B,MAApC,GAA6C,IAAnE;AACAF,wBAAkB,CAAC,IAAD,EAAOE,MAAP,CAAlB;AACD;AACF,GApBD;;AAsBA4B,0CAAI7C,CAAJ,EAAK;AACH,QAAI,KAAKH,QAAT,EAAmB;AACT,UAASK,CAAC,GAAiBF,CAAC,QAA5B;AAAA,UAAqBG,CAAC,GAAKH,CAAC,QAA5B;AACRe,wBAAkB,CAAC,KAAD,CAAlB;AACA,WAAKpB,QAAL,CAAciB,KAAd,CAAoB;AAAEV,SAAC,GAAH;AAAKC,SAAC;AAAN,OAApB;AACD;;AACD,SAAKU,kBAAL,GAA0B,IAA1B;AACA,SAAKhB,QAAL,GAAgB,KAAhB;AACD,GARD;;AASF;AAAC,CArDD;ACbA;;;AAEA,IAEIqD,YAFJ;AAGA;;AACA,IAAaC,qBAAqB,GAAG;AACnC,MAAI,CAACD,YAAL,EAAmB;AACjBA,gBAAY,GAAG,IAAIE,YAAJ,EAAf;AAEA,KAAC,WAAD,EAAc,SAAd,EAAyB,WAAzB,EAAsC,UAAtC,EAAkD,aAAlD,EACGtB,OADH,CACW,gBAAI;AAAI,mBAAM,CAACuB,gBAAP,CACfhK,IADe,EACT,aAAC;AAAI,2BAAY,CAACiK,IAAb,CAAkB,CAACjK,IAAD,EAAO2G,CAAP,CAAlB;AAA4B,OADxB,EAC0B;AAAEuD,eAAO,EAAE;AAAX,OAD1B;AAEhB,KAHH;AAID;;AACD,SAAOL,YAAP;AACD,CAVD;ACJA;;;AACA,IAAaM,SAAS,GAAGC,UAAgB,CAAC,UACxCjK,EADwC,EAExCkK,GAFwC,EAEwB;;;MAD9D5L,QAAQ;AAGV,SAAO6L,cAAoB,CAAC7L,QAAD,CAApB6L,GACL,OAAO7L,QAAQ,CAACM,IAAhB,KAAyB,QAAzB,GACIwL,YAAkB,CAAC9L,QAAD,EAAW;AAAE4L,OAAG;AAAL,GAAX,CADtB,GAEIE,YAAkB,CAAC9L,QAAD,EAAW;AAAEmE,gBAAY,EAAE,eAAQ,CAACpE,KAAT,MAAc,IAAd,IAAcsG,aAAd,GAAc,MAAd,GAAcA,GAAElC,YAAhB,IAA+B,UAAC4H,IAAD,EAAK;AACjF/L,cAAQ,CAACD,KAAT,CAAeoE,YAAf,CAA4B4H,IAA5B;;AACA,UAAI,OAAOH,GAAP,KAAe,UAAnB,EAA+B;AAC7BA,WAAG,CAACG,IAAD,CAAH;AACD,OAFD,MAEO,IAAIH,GAAJ,EAAS;AACdA,WAAG,CAACI,OAAJ,GAAcD,IAAd;AACD;AACF,KAP8C,GAO3CH;AAP2B,GAAX,CAHjBC,GAWL5L,aAAmB,CACjB,KADiB,EAEjB;AAAE2L,OAAG,KAAL;AAAOxC,SAAK,EAAE;AAAE6C,aAAO,EAAE;AAAX;AAAd,GAFiB,EAGjBjM,QAHiB,CAXrB;AAgBD,CApBwC,CAAzC;ACKA,IAAMkM,eAAe,GAAGhL,MAAM,CAAC,iBAAD,CAA9B;AASA;;;AAC+B3B;;AAK7B,qBAAYQ,KAAZ,EAAiB;AAAjB,gBACEqE,kBAAMrE,KAAN,KAAY,IADd;;AAEE,QAAM8H,QAAQ,GAAG;AACfU,aAAO,EAAE,UAAC7G,EAAD,EAAS;YAAN0G,CAAC;YAAEC,CAAC;AACN,mBAAO,GAAK7I,KAAI,CAACO,KAAL,CAAUwI,OAAtB;AACR,YAAI,CAACA,OAAL,EAAc;AACd4D,+BAAuB,CAAC;AACtB5D,iBAAO,CAAC;AAAEH,aAAC,GAAH;AAAKC,aAAC;AAAN,WAAD,CAAP;AACD,SAFsB,CAAvB;AAGD,OAPc;AAQfO,YAAM,EAAE,UAAClH,EAAD,EAAS;YAAN0G,CAAC;YAAEC,CAAC;AACL,oBAAQ,GAAK7I,KAAI,CAACO,KAAL,CAAUqM,QAAvB;AACR,YAAI,CAACA,QAAL,EAAe;AACfD,+BAAuB,CAAC;AACtBC,kBAAQ,CAAC;AAAEhE,aAAC,GAAH;AAAKC,aAAC;AAAN,WAAD,CAAR;AACD,SAFsB,CAAvB;AAGD,OAdc;AAefS,WAAK,EAAE,UAACpH,EAAD,EAAS;YAAN0G,CAAC;YAAEC,CAAC;AACJ,iBAAK,GAAK7I,KAAI,CAACO,KAAL,CAAU+I,KAApB;AACR,YAAI,CAACA,KAAL,EAAY;AACZqD,+BAAuB,CAAC;AACtBrD,eAAK,CAAC;AAAEV,aAAC,GAAH;AAAKC,aAAC;AAAN,WAAD,CAAL;AACD,SAFsB,CAAvB;AAGD;AArBc,KAAjB;AAwBA7I,SAAI,CAAC6M,aAAL,GAAqB,IAAItB,aAAJ,CAAkBlD,QAAlB,CAArB;AACArI,SAAI,CAAC8M,aAAL,GAAqB,IAAItE,aAAJ,CAAkBH,QAAlB,CAArB;AACArI,SAAI,CAAC+M,UAAL,GAAkBC,SAAe,EAAjC;AAEAhN,SAAI,CAACiN,iBAAL,GAAyBjN,KAAI,CAACiN,iBAAL,CAAuBC,IAAvB,CAA4BlN,KAA5B,CAAzB;AACAA,SAAI,CAACmN,kBAAL,GAA0BnN,KAAI,CAACmN,kBAAL,CAAwBD,IAAxB,CAA6BlN,KAA7B,CAA1B;AACAA,SAAI,CAACoN,cAAL,GAAsBpN,KAAI,CAACoN,cAAL,CAAoBF,IAApB,CAAyBlN,KAAzB,CAAtB;;AACD;;AAEDqN;AACExB,yBAAqB,GAAGyB,SAAxB,CAAkC,KAAKF,cAAvC;AACA,SAAKG,qBAAL;AACD,GAHD;;AAKAF;AACE,SAAKE,qBAAL;AACD,GAFD;;AAIAF;AACExB,yBAAqB,GAAG2B,WAAxB,CAAoC,KAAKJ,cAAzC;AACD,GAFD;;AAIAC;AACE,QAAMd,IAAI,GAAG,KAAKQ,UAAL,CAAgBP,OAA7B;AACA,QAAI,CAACD,IAAL,EAAW;AACXA,QAAI,CAACkB,mBAAL,CAAyB,WAAzB,EAAsC,KAAKR,iBAA3C;AACAV,QAAI,CAACkB,mBAAL,CAAyB,YAAzB,EAAuC,KAAKN,kBAA5C;AACAZ,QAAI,CAACR,gBAAL,CAAsB,WAAtB,EAAmC,KAAKkB,iBAAxC;AACAV,QAAI,CAACR,gBAAL,CAAsB,YAAtB,EAAoC,KAAKoB,kBAAzC,EAA6D;AAAElB,aAAO,EAAE;AAAX,KAA7D;AACD,GAPD;;AASAoB,oDAAkB3E,CAAlB,EAAmB;AACjB,QAAI,KAAKoE,aAAL,CAAmBY,SAAnB,MAAkChF,CAAC,CAACgE,eAAD,CAAvC,EAA0D;AAC1DhE,KAAC,CAACS,cAAF;AACA,SAAK0D,aAAL,CAAmBc,KAAnB,CAAyBjF,CAAzB;AACAA,KAAC,CAACgE,eAAD,CAAD,GAAqB,IAArB;AACD,GALD;;AAOAW,qDAAmB3E,CAAnB,EAAoB;AAClB,QAAIA,CAAC,CAACgE,eAAD,CAAL,EAAwB;AACxB,SAAKI,aAAL,CAAmBa,KAAnB,CAAyBjF,CAAzB;AACAA,KAAC,CAACgE,eAAD,CAAD,GAAqB,IAArB;AACD,GAJD;;AAMAW,iDAAenL,EAAf,EAAwB;QAAT2E;QAAC9E,IAAI;QAAE2G,CAAC;;AACrB,YAAQ3G,IAAR;AACE,WAAK,WAAL;AACE,aAAK8K,aAAL,CAAmBe,IAAnB,CAAwBlF,CAAxB;AACA;;AACF,WAAK,SAAL;AACE,aAAKmE,aAAL,CAAmBgB,GAAnB,CAAuBnF,CAAvB;AACA;;AACF,WAAK,WAAL;AAAkB;AAChB,eAAKoE,aAAL,CAAmBc,IAAnB,CAAwBlF,CAAxB;AACA;AACD;;AACD,WAAK,UAAL;AACA,WAAK,aAAL;AAAoB;AAClB,eAAKoE,aAAL,CAAmBe,GAAnB,CAAuBnF,CAAvB;AACA;AACD;AAfH;;AAmBA,QAAI,KAAKmE,aAAL,CAAmBiB,UAAnB,MAAmC,KAAKhB,aAAL,CAAmBgB,UAAnB,EAAvC,EAAwE;AACtErD,WAAK;AACN;AACF,GAvBD;;AAyBA4C;AAAA;;AACQ,aAAyB,KAAK9M,KAA9B;AAAA,QAAEC,QAAQ,cAAV;AAAA,QAAYuN,QAAQ,cAApB;AACN,WAAOtN,cAACyL,SAADzL,EAAU;AACf2L,SAAG,EAAE,UAACG,IAAD,EAAqB;AACxBvM,aAAI,CAAC+M,UAAL,CAAgBP,OAAhB,GAA0BD,IAA1B;;AACA,YAAI,OAAOwB,QAAP,KAAoB,UAAxB,EAAoC;AAClCA,kBAAQ,CAACxB,IAAD,CAAR;AACD,SAFD,MAEO,IAAIwB,QAAJ,EAAc;AACnBA,kBAAQ,CAACvB,OAAT,GAAmBD,IAAnB;AACD;AACF;AARc,KAAV9L,EAUJD,QAVIC,CAAP;AAYD,GAdD;;AAeF;AAAC,EAnH8BY;ACf/B;;;AACO,IAAM2M,eAAe,GAAGpO,aAAmB,CAA8B,IAA9B,CAA3C;ACCP;;AACA;AAIE;AACE,SAAKqO,OAAL,GAAe,IAAf;AACA,SAAKC,WAAL,GAAmB,IAAIpC,YAAJ,EAAnB;AACD;;AAEDqC,mDAAMF,OAAN,EAAeG,YAAf,EAA2B;AACzB,SAAKH,OAAL,GAAeA,OAAf;AACA,SAAKC,WAAL,CAAiBlC,IAAjB,CAAsB;AAAEoC,kBAAY,cAAd;AAAgBH,aAAO,EAAE,KAAKA;AAA9B,KAAtB;AACD,GAHD;;AAKAE,oDAAOC,YAAP,EAAmB;AACjB,SAAKF,WAAL,CAAiBlC,IAAjB,CAAsB;AAAEoC,kBAAY,cAAd;AAAgBH,aAAO,EAAE,KAAKA;AAA9B,KAAtB;AACD,GAFD;;AAIAE,iDAAIC,YAAJ,EAAgB;AACd,SAAKF,WAAL,CAAiBlC,IAAjB,CAAsB;AAAEoC,kBAAY,cAAd;AAAgBH,aAAO,EAAE,KAAKA,OAA9B;AAAuCJ,SAAG,EAAE;AAA5C,KAAtB;AACA,SAAKI,OAAL,GAAe,IAAf;AACD,GAHD;;AAIF;AAAC,CAtBD;;IAwBMI,YAAY,GAAG;AACnBC,UAAQ,EAAE,UAACpM,EAAD,EAA0B;QAAvB+L,OAAO;QAAEG,YAAY;AAAS;AADxB;AAMrB;AACA;;;AACsCrO;;AAMpC,4BAAYQ,KAAZ,EAAiB;AAAjB,gBACEqE,kBAAMrE,KAAN,KAAY,IADd;;AAEU,gBAAQ,GAAKP,KAAI,CAACO,KAAL,CAAU+N,QAAvB;AAERtO,SAAI,CAACuO,gBAAL,GAAwB,IAAIJ,oBAAJ,EAAxB;;AAEAnO,SAAI,CAACuO,gBAAL,CAAsBL,WAAtB,CAAkCZ,SAAlC,CAA4C,UAACpL,EAAD,EAA+B;UAA5B+L,OAAO;UAAEG,YAAY;UAAEP,GAAG;AACvES,cAAQ,CAAC;AACPL,eAAO,EAAEJ,GAAG,GAAG,IAAH,GAAUI,OADf;AAEPG,oBAAY,EAAEP,GAAG,GAAG,IAAH,GAAUO;AAFpB,OAAD,CAAR;AAID,KALD;;;AAMD;;AAEDI,+DAAsBzK,SAAtB,EAA+B;AACrB,gBAAQ,GAAK,KAAKxD,KAAL,CAAUC,QAAvB;AACR,WAAOuD,SAAS,CAACvD,QAAV,KAAuBA,QAA9B;AACD,GAHD;;AAKAgO;AACU,gBAAQ,GAAK,KAAKjO,KAAL,CAAUC,QAAvB;AACR,WACEC,cAACuN,eAAe,CAAC/M,QAAjBR,EAAyB;AAACW,WAAK,EAAE,KAAKmN;AAAb,KAAzB9N,EACGD,QADHC,CADF;AAKD,GAPD;;AAtBO+N,kCAAeH,YAAf;AA8BT;AAjCA,EAAsC7J;;AClCtC,IAAM6J,cAAY,GAAG;AACnBtF,SAAO,EAAE,UAAC7G,EAAD,EAAiB;QAAdkM,YAAY;AAAS,GADd;AAEnBxB,UAAQ,EAAE,UAAC1K,EAAD,EAAiB;QAAdkM,YAAY;AAAS,GAFf;AAGnB9E,OAAK,EAAE,UAACpH,EAAD,EAAiB;QAAdkM,YAAY;AAAS;AAHZ,CAArB;AAWA;;AACA,IAAaK,UAAU,GAA8BtC,UAAgB,CAAC,UAACjK,EAAD,EAEnEkK,GAFmE,EAEhE;MADJrD,OAAO;MAAE6D,QAAQ;MAAEtD,KAAK;MAAE2E,OAAO;MAAEzN,QAAQ;AAE3C,MAAM2B,OAAO,GAAGuM,UAAgB,CAACV,eAAD,CAAhC;AACA,MAAMO,gBAAgB,GAAGpM,OAAzB;AAEA,SACE1B,cAAC4M,SAAD5M,EAAU;AACRsI,WAAO,EAAE,UAAC7G,EAAD,EAAS;UAAN0G,CAAC;UAAEC,CAAC;AACd0F,sBAAgB,SAAhB,oBAAgB,WAAhB,GAAgB,MAAhB,mBAAgB,CAAEZ,KAAlB,CAAwBM,OAAxB,EAAiC;AAAErF,SAAC,GAAH;AAAKC,SAAC;AAAN,OAAjC;AACAE,aAAO,SAAP,WAAO,WAAP,GAAO,MAAP,UAAO,CAAG;AAAEqF,oBAAY,EAAE;AAAExF,WAAC,GAAH;AAAKC,WAAC;AAAN;AAAhB,OAAH,CAAP;AACD,KAJO;AAKR+D,YAAQ,EAAE,UAAC1K,EAAD,EAAS;UAAN0G,CAAC;UAAEC,CAAC;AACf0F,sBAAgB,SAAhB,oBAAgB,WAAhB,GAAgB,MAAhB,mBAAgB,CAAEI,MAAlB,CAAyB;AAAE/F,SAAC,GAAH;AAAKC,SAAC;AAAN,OAAzB;AACA+D,cAAQ,SAAR,YAAQ,WAAR,GAAQ,MAAR,WAAQ,CAAG;AAAEwB,oBAAY,EAAE;AAAExF,WAAC,GAAH;AAAKC,WAAC;AAAN;AAAhB,OAAH,CAAR;AACD,KARO;AASRS,SAAK,EAAE,UAACpH,EAAD,EAAS;UAAN0G,CAAC;UAAEC,CAAC;AACZ0F,sBAAgB,SAAhB,oBAAgB,WAAhB,GAAgB,MAAhB,mBAAgB,CAAEV,GAAlB,CAAsB;AAAEjF,SAAC,GAAH;AAAKC,SAAC;AAAN,OAAtB;AACAS,WAAK,SAAL,SAAK,WAAL,GAAK,MAAL,QAAK,CAAG;AAAE8E,oBAAY,EAAE;AAAExF,WAAC,GAAH;AAAKC,WAAC;AAAN;AAAhB,OAAH,CAAL;AACD,KAZO;AAaRkF,YAAQ,EAAE3B;AAbF,GAAV3L,EAeGD,QAfHC,CADF;AAmBD,CAzBoE,CAArE;AA0BAgO,UAAU,CAACJ,YAAX,GAA0BA,cAA1B;;ACtCA,IAAMrD,OAAK,GAAG,UAAC5J,KAAD,EAAQ6J,GAAR,EAAaC,GAAb,EAAgB;AAAK,aAAI,CAACA,GAAL,CAASC,IAAI,CAACF,GAAL,CAAS7J,KAAT,EAAgB8J,GAAhB,CAAT,EAA+BD,GAA/B;AAAmC,CAAtE;;AAEA,IAAMoD,cAAY,GAAG;AACnBO,SAAO,EAAE,UAACC,IAAD,EAAK,CAAO,CADF;AAEnBC,QAAM,EAAE,UAACD,IAAD,EAAK,CAAO,CAFD;AAGnBE,SAAO,EAAE,UAACF,IAAD,EAAK,CAAO,CAHF;AAInBG,QAAM,EAAE,UAACH,IAAD,EAAK,CAAO;AAJD,CAArB;AAQA;;;AACgC9O;;AAK9B,sBAAYQ,KAAZ,EAAiB;AAAjB,gBACEqE,kBAAMrE,KAAN,KAAY,IADd;;AAGEP,SAAI,CAACiP,MAAL,GAAc,KAAd;AAEAjP,SAAI,CAACkP,UAAL,GAAkBlP,KAAI,CAACkP,UAAL,CAAgBhC,IAAhB,CAAqBlN,KAArB,CAAlB;AAEAA,SAAI,CAAC+M,UAAL,GAAkBC,SAAe,EAAjC;;AACD;;AAEDmC;AACU,mBAAW,GAAK,KAAKhN,OAAL,CAAY+L,WAA5B;AACRA,eAAW,CAACZ,SAAZ,CAAsB,KAAK4B,UAA3B;AACD,GAHD;;AAKAC,yDAAsBpL,SAAtB,EAA+B;AACrB,gBAAQ,GAAK,KAAKxD,KAAL,CAAUC,QAAvB;AACR,WAAOuD,SAAS,CAACvD,QAAV,KAAuBA,QAA9B;AACD,GAHD;;AAKA2O;AACU,mBAAW,GAAK,KAAKhN,OAAL,CAAY+L,WAA5B;AACRA,eAAW,CAACV,WAAZ,CAAwB,KAAK0B,UAA7B;AACD,GAHD;;AAKAC,8CAAWjN,EAAX,EAAyC;QAA5B+L,OAAO;QAAEG,YAAY;QAAEP,GAAG;;AAC/B,aAKF,KAAKd,UAAL,CAAgBP,OAAhB,CAAyB4C,qBAAzB,EALE;AAAA,QACJpF,IAAI,UADA;AAAA,QAEJF,GAAG,SAFC;AAAA,QAGJC,KAAK,WAHD;AAAA,QAIJE,MAAM,YAJF;;AAMA,aAEF,KAAK1J,KAFH;AAAA,QACJyO,MAAM,YADF;AAAA,QACIJ,OAAO,aADX;AAAA,QACaG,OAAO,aADpB;AAAA,QACsBD,MAAM,YAD5B;AAGN,QAAMG,MAAM,GAAGb,YAAY,IACtBpD,OAAK,CAACoD,YAAY,CAACxF,CAAd,EAAiBoB,IAAjB,EAAuBD,KAAvB,CAALiB,KAAuCoD,YAAY,CAACxF,CAD1C,IAEVoC,OAAK,CAACoD,YAAY,CAACvF,CAAd,EAAiBiB,GAAjB,EAAsBG,MAAtB,CAALe,KAAuCoD,YAAY,CAACvF,CAFzD;AAIA,QAAI,CAAC,KAAKoG,MAAN,IAAgBA,MAApB,EAA4BL,OAAO,CAAC;AAAEX,aAAO,SAAT;AAAWG,kBAAY;AAAvB,KAAD,CAAP;AAC5B,QAAI,KAAKa,MAAL,IAAeA,MAAnB,EAA2BH,MAAM,CAAC;AAAEb,aAAO,SAAT;AAAWG,kBAAY;AAAvB,KAAD,CAAN;AAC3B,QAAI,KAAKa,MAAL,IAAe,CAACA,MAApB,EAA4BF,OAAO,CAAC;AAAEd,aAAO,SAAT;AAAWG,kBAAY;AAAvB,KAAD,CAAP;AAC5B,QAAIa,MAAM,IAAIpB,GAAd,EAAmBmB,MAAM,CAAC;AAAEf,aAAO,SAAT;AAAWG,kBAAY;AAAvB,KAAD,CAAN;AAEnB,SAAKa,MAAL,GAAcA,MAAM,IAAI,CAACpB,GAAzB;AACD,GApBD;;AAsBAsB;AACU,gBAAQ,GAAK,KAAK5O,KAAL,CAAUC,QAAvB;AACR,WAAOC,cAACyL,SAADzL,EAAU;AAAC2L,SAAG,EAAE,KAAKW;AAAX,KAAVtM,EAAkCE,QAAc,CAAC0O,IAAf1O,CAAoBH,QAApBG,CAAlCF,CAAP;AACD,GAHD;;AAnDO0O,4BAAed,cAAf;AAuDT;AAxDA,EAAgC7J;;AA0DhC2K,UAAU,CAACjH,WAAX,GAAyB8F,eAAzB;ACzEA;;IAKMsB,MAAM,GAAG;AACbC,MAAI,EAAE;AACJ/M,YAAQ,EAAE;AADN,GADO;AAIbgN,cAAY,EAAE;AACZhN,YAAQ,EAAE,UADE;AAEZsH,OAAG,EAAE,CAFO;AAGZE,QAAI,EAAE,CAHM;AAIZyF,UAAM,EAAE,MAJI;AAKZC,SAAK,EAAE,MALK;AAMZC,YAAQ,EAAE,QANE;AAOZxF,UAAM,EAAE,CAAC,CAPG;AAQZyF,cAAU,EAAE,QARA;AASZ1F,WAAO,EAAE;AATG,GAJD;AAeb2F,eAAa,EAAE;AACbrN,YAAQ,EAAE,UADG;AAEbsH,OAAG,EAAE,CAFQ;AAGbE,QAAI,EAAE,CAHO;AAIbyF,UAAM,EAAE,MAJK;AAKbC,SAAK,EAAE,MALM;AAMbC,YAAQ,EAAE;AANG,GAfF;AAuBbG,iBAAe,EAAE;AACftN,YAAQ,EAAE,UADK;AAEfsH,OAAG,EAAE,CAFU;AAGfE,QAAI,EAAE,CAHS;AAIfyF,UAAM,EAAE,MAJO;AAKfC,SAAK,EAAE,MALQ;AAMfC,YAAQ,EAAE,MANK;AAOfI,aAAS,EAAE,KAPI;AAQfC,YAAQ,EAAE;AARK,GAvBJ;AAiCbC,kBAAgB,EAAE;AAChBzN,YAAQ,EAAE,UADM;AAEhBsH,OAAG,EAAE,CAFW;AAGhBE,QAAI,EAAE,CAHU;AAIhB0F,SAAK,EAAE,MAJS;AAKhBD,UAAM,EAAE,MALQ;AAMhBM,aAAS,EAAE,KANK;AAOhBC,YAAQ,EAAE;AAPM;AAjCL;AA4Cf;;;AAC2BjQ;;AAezB,iBAAYQ,KAAZ,EAAiB;AAAjB,gBACEqE,kBAAMrE,KAAN,KAAY,IADd;;AAiCAP,oBAAU;AAAY,aAAC;AAAEyP,cAAM,EAAEzP,KAAI,CAACkQ,QAAL,CAAcC,YAAxB;AAAsCT,aAAK,EAAE1P,KAAI,CAACkQ,QAAL,CAAcE;AAA3D,OAAD;AAA0E,KAAhG;;AA9BEpQ,SAAI,CAACqQ,cAAL,GAAsBrQ,KAAI,CAACqQ,cAAL,CAAoBnD,IAApB,CAAyBlN,KAAzB,CAAtB;AACAA,SAAI,CAACsQ,OAAL,GAAetD,SAAe,EAA9B;;AACD;;AAEDuD;AACE,SAAKC,eAAL;AACA,SAAKH,cAAL;AACD,GAHD;;AAKAE;;;;AAIQ,aAA4B,KAAKhQ,KAAjC;AAAA,QAAEkQ,SAAS,eAAX;AAAA,QAAaC,UAAU,gBAAvB;;AACN,QAAID,SAAU,GAAG,CAAC,CAAlB,EAAqB;AACnB,WAAKP,QAAL,CAAcO,SAAd,GAA0BA,SAA1B;AACD;;AACD,QAAIC,UAAW,GAAG,CAAC,CAAnB,EAAsB;AACpB,WAAKR,QAAL,CAAcQ,UAAd,GAA2BA,UAA3B;AACD;AACF,GAXD;;;;;AAgBAH;AACE,SAAKV,aAAL,CAAmBpC,mBAAnB,CAAuC,QAAvC,EAAiD,KAAK4C,cAAtD;AACA,SAAKP,eAAL,CAAqBrC,mBAArB,CAAyC,QAAzC,EAAmD,KAAK4C,cAAxD;AACD,GAHD;;AAOAE;AACE,QAAMI,IAAI,GAAG,KAAKC,OAAL,EAAb;AACQ,aAAK,GAAaD,IAAI,MAAtB;AAAA,QAAOlB,MAAM,GAAKkB,IAAI,OAAtB;AAER,SAAKb,eAAL,CAAqBW,SAArB,GAAiChB,MAAjC;AACA,SAAKK,eAAL,CAAqBY,UAArB,GAAkChB,KAAlC;AAEA,QAAMmB,YAAY,GAAG,CAArB;AACA,SAAKC,cAAL,CAAoBlH,KAApB,CAA0B8F,KAA1B,GAAqCA,KAAK,GAAGmB,YAAR,GAAoB,IAAzD;AACA,SAAKC,cAAL,CAAoBlH,KAApB,CAA0B6F,MAA1B,GAAsCA,MAAM,GAAGoB,YAAT,GAAqB,IAA3D;AACA,SAAKhB,aAAL,CAAmBY,SAAnB,GAA+BI,YAA/B;AACA,SAAKhB,aAAL,CAAmBa,UAAnB,GAAgCG,YAAhC;AAEQ,oBAAY,GAAK,KAAKtQ,KAAL,CAAUwQ,YAA3B;AACRA,gBAAY,CAACJ,IAAD,CAAZ;AACD,GAfD;;AAiBAJ;AACE,SAAKL,QAAL,GAAgB,KAAKI,OAAL,CAAa9D,OAA7B;AAEA,SAAKgD,YAAL,GAAoBpF,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAApB;AACAlE,UAAM,CAACK,MAAP,CAAc,KAAKgJ,YAAL,CAAkB5F,KAAhC,EAAuC0F,MAAM,CAACE,YAA9C;AACA,SAAKU,QAAL,CAAc3F,WAAd,CAA0B,KAAKiF,YAA/B;AAEA,SAAKK,aAAL,GAAqBzF,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAArB;AACAlE,UAAM,CAACK,MAAP,CAAc,KAAKqJ,aAAL,CAAmBjG,KAAjC,EAAwC0F,MAAM,CAACO,aAA/C;AACA,SAAKA,aAAL,CAAmB9D,gBAAnB,CAAoC,QAApC,EAA8C,KAAKsE,cAAnD;AACA,SAAKb,YAAL,CAAkBjF,WAAlB,CAA8B,KAAKsF,aAAnC;AAEA,SAAKiB,cAAL,GAAsB1G,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAtB;AACA,SAAKwF,aAAL,CAAmBtF,WAAnB,CAA+B,KAAKuG,cAApC;AAEA,SAAKhB,eAAL,GAAuB1F,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAvB;AACAlE,UAAM,CAACK,MAAP,CAAc,KAAKsJ,eAAL,CAAqBlG,KAAnC,EAA0C0F,MAAM,CAACQ,eAAjD;AACA,SAAKA,eAAL,CAAqB/D,gBAArB,CAAsC,QAAtC,EAAgD,KAAKsE,cAArD;AACA,SAAKb,YAAL,CAAkBjF,WAAlB,CAA8B,KAAKuF,eAAnC;AAEA,SAAKG,gBAAL,GAAwB7F,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAxB;AACAlE,UAAM,CAACK,MAAP,CAAc,KAAKyJ,gBAAL,CAAsBrG,KAApC,EAA2C0F,MAAM,CAACW,gBAAlD;AACA,SAAKH,eAAL,CAAqBvF,WAArB,CAAiC,KAAK0F,gBAAtC;AACD,GAvBD;;AAyBAM;AACE,QAAMrO,KAOF,KAAK3B,KAPT;AAAA,QACEwQ,YAAY,kBADd;AAAA,QAEsBC,SAAS,wBAF/B;AAAA,QAGEpH,KAAK,WAHP;AAAA,QAIE6G,SAAS,eAJX;AAAA,QAKEC,UAAU,gBALZ;AAAA,QAMKO,SAAS,cANR,0EAMQ,CANd;;AASA,WACExQ,cAACuQ,SAADvQ,CAAU;AAAVA;AACEkE,kBAAY,EAAE,KAAK2L;AACnB1G,WAAK,EAAEA,KAAK,yBAAQ0F,MAAM,CAACC,IAAf,GAAwB3F,KAAxB,IAAkC0F,MAAM,CAACC;OACjD0B,UAHNxQ,CADF;AAOD,GAjBD;;AA3FO8P,uBAAe;AACpBW,sBAAkB,EAAE;AADA,GAAf;AA6GT;AA9GA,EAA2B7P;AC5C3B;;;;;IAGa8P,YAAY,GAAG,UAC1BC,gBAD0B,EACkBC,kBADlB,EACkD;AAE5E,MAAIC,qBAAqB,GAAGD,kBAAkB,EAA9C;AACA,MAAME,UAAU,GAAG,IAAIC,GAAJ,EAAnB;;AACA;AAA8BzR;;AAA9B;;AAcC;;AAXC0R;AACEF,gBAAU,CAACG,GAAX,CAAe,IAAf;AACD,KAFD;;AAIAD;AACEF,gBAAU,CAACI,MAAX,CAAkB,IAAlB;AACD,KAFD;;AAIAF;AACE,aAAOhR,cAAC2Q,gBAAD3Q,EAAiBwB,aAAK,KAAK1B,KAAV,EAAqB+Q,qBAArB,CAAjB7Q,CAAP;AACD,KAFD;;AAGF;AAAC,GAdD,CAA8BY,aAA9B;;AAeAoQ,iBAAe,CAAC9C,MAAhB,GAAyB;AACvB2C,yBAAqB,GAAGD,kBAAkB,EAA1C;AACAO,SAAK,CAACC,IAAN,CAAWN,UAAU,CAACO,MAAX,EAAX,EAAgCtH,OAAhC,CAAwC,qBAAS;AAAI,sBAAS,CAAC9G,WAAV;AAAuB,KAA5E;AACD,GAHD;;AAIA,SAAO+N,eAAP;AACD;AChCD;;;IACaM,iBAAiB,GAAwB,UACpDC,SADoD,EACzCC,yBADyC,EACX;AAA9B;AAAAA;AAA8B;;AAEzC,MAAMC,iBAAiB,GAAG,UAACC,SAAD,EAAYC,KAAZ,EAAiB;AACzCjM,UAAM,CAACI,IAAP,CAAY0L,yBAAZ,EAAuCzH,OAAvC,CAA+C,UAAC6H,YAAD,EAAa;AAC1D,UAAMC,WAAW,GAAGL,yBAAyB,CAACI,YAAD,CAAzB,EAApB;;AACA,UAAIC,WAAW,IAAIH,SAAS,CAACE,YAAD,CAAT,KAA4BD,KAAK,CAACC,YAAD,CAApD,EAAoE;AAClEC,mBAAW,CAACH,SAAS,CAACE,YAAD,CAAV,CAAX;AACD;AACF,KALD;AAMD,GAPD;;AASA,MAAIE,gBAAJ;AACA,MAAIC,YAAY,GAAG,IAAnB;AACA,MAAIC,gBAAgB,GAAG,IAAvB;AACA,MAAIC,QAAQ,GAAG,IAAf;AACA,MAAIC,YAAY,GAAG,KAAnB;;AAEA,MAAMC,YAAY,GAAG,UAAC3M,MAAD,EAASgI,OAAT,EAAmB4E,QAAnB,EAA4B;AAC/C,QAAMC,YAAY,GAAG,UAACC,SAAD,EAAU;AAC7B,UAAIP,YAAY,KAAK,IAArB,EAA2B;AACzBA,oBAAY,GAAGO,SAAf;AACD;;AACD,UAAMC,WAAW,GAAG/M,MAAM,cAAM8M,SAAN,GAAmB9E,OAAnB,CAA1B;;AACA,UAAMmE,KAAK,yBAAQW,SAAR,GAAsBC,WAAtB,CAAX;;AAEA,UAAI,OAAOH,QAAP,KAAoB,UAAxB,EAAoC;AAClCA,gBAAQ,CAACT,KAAD,EAAQW,SAAR,CAAR;AACD;;AACD,UAAID,YAAY,KAAKP,gBAArB,EAAuC;AACrC,YAAIE,gBAAgB,KAAKD,YAAzB,EAAuC;AACrCE,kBAAQ,GAAGN,KAAX;;AACA,cAAI,CAACO,YAAL,EAAmB;AACjBF,4BAAgB,GAAGD,YAAnB;AACAG,wBAAY,GAAG,IAAf;AACD;AACF;;AACDH,oBAAY,GAAG,IAAf;AACD;;AAED,aAAOQ,WAAP;AACD,KAtBD;;AAuBAT,oBAAgB,GAAGO,YAAnB;AAEAd,aAAS,CAACiB,QAAV,CAAmBH,YAAnB,EAAiC;AAC/B,UAAIH,YAAJ,EAAkB;AAChBT,yBAAiB,CAACQ,QAAD,EAAWD,gBAAX,CAAjB;AACAE,oBAAY,GAAG,KAAf;AACD;AACF,KALD;AAMD,GAhCD;;AAiCA,MAAMO,iBAAiB,GAAG,UAACC,KAAD,EAAQlN,MAAR,EAAgBgI,OAAhB,EAAuB;AAC/C2E,gBAAY,CAAC,iBAAK;;;AAAI,sBACpB1Q,GAACiR,KAAD,IAASlN,MAAM,CAACmM,KAAK,CAACe,KAAD,CAAN,EAAelF,OAAf,CADK;AAEpB,KAFU,CAAZ;AAGD,GAJD;;AAMA,SAAO;AACL2E,gBAAY,cADP;AAELM,qBAAiB;AAFZ,GAAP;AAID;;AC9DD,IAAME,kBAAkB,GAAG,UAACC,MAAD,EAAS9B,UAAT,EAAqB+B,OAArB,EAAoC;AAC7D;AAAwBvT;;AAAxB;;AAMC;;AAHCiC;AACE,aAAOvB,cAAC4S,MAAD5S,EAAOwB,aAAKsP,UAAL,EAAqB,KAAKhR,KAA1B,CAAPE,CAAP;AACD,KAFD;;AAGF;AAAC,GAND,CAAwBY,aAAxB;;AAOAW,WAAS,CAACuP,UAAV,GAAuB8B,MAAM,CAAC9B,UAA9B;AACApL,QAAM,CAACK,MAAP,CAAcxE,SAAd,EAAyBsR,OAAzB;AACA,SAAOtR,SAAP;AACD,CAXD,C,CAiBA;;AAEA;;;AACA,IAAauR,cAAc,GAAG,sBAAU;AAAI,mBAACF,MAAD,EAAO;AACjD,QAAM9S,KAAK,GAAG,EAAd;AACA,QAAM+S,OAAO,GAAG,EAAhB;AACA,QAAME,gBAAgB,GAAIH,MAA2B,CAAC9B,UAAtD;AAEApL,UAAM,CAACsN,OAAP,CAAeD,gBAAf,EAAiChJ,OAAjC,CAAyC,UAACtI,EAAD,EAA6C;UAA5C2E;UAAC6M,SAAS;UAAEC,aAAa;;AACjE,UAAM3B,SAAS,GAAGT,UAAU,CAACoC,aAAD,CAA5B;;AACA,UAAI3B,SAAS,IAAIA,SAAS,KAAKqB,MAAM,CAACM,aAAD,CAArC,EAAsD;AACpDpT,aAAK,CAACmT,SAAD,CAAL,GAAmB1B,SAAnB;AACD;;AACDsB,aAAO,CAACK,aAAD,CAAP,GAAyB3B,SAAS,IAAIqB,MAAM,CAACM,aAAD,CAA5C;AACD,KAND;AAQA,WAAOxN,MAAM,CAACI,IAAP,CAAYhG,KAAZ,EAAmByD,MAAnB,GAA4B,CAA5B,GACHoP,kBAAkB,CAACC,MAAD,EAAS9S,KAAT,EAAgB+S,OAAhB,CADf,GAC0CD,MADjD;AAED,GAf2C;AAe3C,CAfD;ACtBA;;AACA;;;IAGaO,OAAO,GAAGC,KAAe,CAAC;AACrCrH,SAAO,EAAEsH,UAAoB,CAAE,OAAOC,OAAP,KAAmB,WAApB,GAAmCA,OAAnC,GAA6C5N,MAA9C;AADQ,CAAD","names":["PluginHostContext","React.createContext","PositionContext","TemplateHostContext","__extends","_this","index","positionContext","indexes","fn","calculatedPosition","PluginIndexer","props","children","React.createElement","Consumer","React.Children","map","child","type","childPosition","memoize","Provider","key","String","value","React.PureComponent","PLUGIN_HOST_CONTEXT","POSITION_CONTEXT","TEMPLATE_HOST_CONTEXT","RERENDER_TEMPLATE_EVENT","Symbol","RERENDER_TEMPLATE_SCOPE_EVENT","UPDATE_CONNECTION_EVENT","withContext","Context","name","Component","__assign","_a","context","withHostAndPosition","PluginBase","pluginHost","_c","position","dependencies","plugin","container","registerPlugin","ensureDependencies","unregisterPlugin","Plugin","getRenderingData","params","templates","collect","filter","predicate","reverse","templateHost","id","template","forceUpdate","propsName","TemplatePlaceholderBase","registerSubscription","subscription","nextProps","length","shallowEqual","unregisterSubscription","restTemplates","slice","content","templateContent","templatePlaceholder","React.Component","TemplatePlaceholder","PlaceholderWithRef","forwardedRef","_super","host","PluginHostCore","PluginHostBase","PluginHost","getAvailableGetters","getGetterValue","getterName","get","trackedDependencies","getters","Proxy","target","prop","undefined","result","getOwnPropertyDescriptor","configurable","enumerable","ownKeys","knownKeys","reduce","acc","Object","defineProperty","isTrackedDependenciesChanged","prevTrackedDependencies","keys","assign","getAvailableActions","getAction","actionName","actions","_b","_d","action","nextParams","newParams","nextAction","ActionBase","Action","lastComputed","lastTrackedDependencies","lastResult","original","computed","GetterBase","broadcast","Getter","globalTemplateId","TemplateBase","Template","updateConnection","TemplateConnectorBase","contextType","TemplateConnector","TIMEOUT","delegate","touchStartTimeout","dragging","TouchStrategy","clearTimeout","e","touches","x","y","setTimeout","onStart","cancelWaiting","clientX","clientY","preventDefault","onMove","changedTouches","onEnd","mouseInitialOffset","gestureCover","toggleGestureCover","toggle","cursor","style","pointerEvents","top","right","left","bottom","opacity","zIndex","document","createElement","body","appendChild","forEach","clear","selection","window","getSelection","empty","removeAllRanges","BOUNDARY","clamp","min","max","Math","isBoundExceeded","initialX","initialY","MouseStrategy","dragStarted","element","elementFromPoint","getComputedStyle","eventEmitter","getSharedEventEmitter","EventEmitter","addEventListener","emit","passive","RefHolder","React.forwardRef","ref","React.isValidElement","React.cloneElement","node","current","display","draggingHandled","unstable_batchedUpdates","onUpdate","mouseStrategy","touchStrategy","elementRef","React.createRef","mouseDownListener","bind","touchStartListener","globalListener","Draggable","subscribe","setupNodeSubscription","unsubscribe","removeEventListener","isWaiting","start","move","end","isDragging","dragItem","DragDropContext","payload","dragEmitter","DragDropProviderCore","clientOffset","defaultProps","onChange","dragDropProvider","DragDropProvider","DragSource","React.useContext","update","onEnter","args","onOver","onLeave","onDrop","isOver","handleDrag","DropTarget","getBoundingClientRect","only","styles","root","triggersRoot","height","width","overflow","visibility","expandTrigger","contractTrigger","minHeight","minWidth","contractNotifier","rootNode","clientHeight","clientWidth","setupListeners","rootRef","Sizer","createListeners","scrollTop","scrollLeft","size","getSize","scrollOffset","expandNotifier","onSizeChange","Container","restProps","containerComponent","connectProps","WrappedComponent","getAdditionalProps","storedAdditionalProps","components","Set","RenderComponent","add","delete","Array","from","values","createStateHelper","component","controlledStateProperties","notifyStateChange","nextState","state","propertyName","changeEvent","lastStateUpdater","initialState","lastInitialState","newState","shouldNotify","applyReducer","callback","stateUpdater","prevState","stateChange","setState","applyFieldReducer","field","makeBoundComponent","Target","exposed","withComponents","targetComponents","entries","fieldName","componentName","RefType","PropTypes.shape","PropTypes.instanceOf","Element"],"sources":["../src/plugin-based/contexts.ts","../src/plugin-based/plugin-indexer.tsx","../src/plugin-based/constants.ts","../src/utils/with-props-from-context.tsx","../src/plugin-based/plugin.tsx","../src/plugin-based/template-placeholder.tsx","../src/plugin-based/plugin-host.tsx","../src/plugin-based/helpers.ts","../src/plugin-based/action.tsx","../src/plugin-based/getter.tsx","../src/plugin-based/template.tsx","../src/plugin-based/template-connector.tsx","../src/draggable/touch-strategy.ts","../src/draggable/gesture-cover.ts","../src/draggable/selection-utils.ts","../src/draggable/mouse-strategy.ts","../src/draggable/shared-events.ts","../src/ref-holder.tsx","../src/draggable.tsx","../src/drag-drop/context.ts","../src/drag-drop/provider.tsx","../src/drag-drop/source.tsx","../src/drag-drop/target.tsx","../src/sizer.tsx","../src/utils/connect-props.tsx","../src/utils/state-helper.ts","../src/utils/with-components.tsx","../src/utils/ref-type.ts"],"sourcesContent":["import * as React from 'react';\nimport { PluginHost, PluginPositionFn } from '@devexpress/dx-core';\n\n/** @internal */\nexport interface TemplateHostInterface {\n  params(...args): any;\n  templates(...args): any;\n}\n\n/** @internal */\nexport const PluginHostContext = React.createContext<PluginHost | null>(null);\n/** @internal */\nexport const PositionContext = React.createContext<PluginPositionFn>(() => []);\n/** @internal */\nexport const TemplateHostContext = React.createContext<TemplateHostInterface | null>(null);\n","import * as React from 'react';\nimport { PluginPositionFn } from '@devexpress/dx-core';\nimport { PositionContext } from './contexts';\n\ntype MemoizedPluginPositionFn =\n  (index: number, positionContext: PluginPositionFn) => PluginPositionFn;\n\ntype PluginIndexerProps = {\n  children: React.ReactNode;\n};\n\n/** @internal */\nexport class PluginIndexer extends React.PureComponent<PluginIndexerProps> {\n  indexes: { [index: number]: PluginPositionFn } = {};\n  memoize: MemoizedPluginPositionFn = (index, positionContext) => {\n    if (this.indexes[index]) return this.indexes[index];\n\n    const fn: PluginPositionFn = () => {\n      const calculatedPosition = positionContext();\n      return [...calculatedPosition, index];\n    };\n    this.indexes[index] = fn;\n\n    return fn;\n  }\n  render() {\n    const { children } = this.props;\n    return (\n      <PositionContext.Consumer>\n        {positionContext => (\n          React.Children.map(children, (child: any, index: number) => {\n            if (!child || !child.type) return child;\n            const childPosition = this.memoize(index, positionContext);\n\n            return (\n              <PositionContext.Provider key={String(index)} value={childPosition}>\n                {child}\n              </PositionContext.Provider>\n            );\n          })\n        )}\n      </PositionContext.Consumer>\n    );\n  }\n}\n","/** @internal */\nexport const PLUGIN_HOST_CONTEXT = 'dxcore_pluginHost_context';\n/** @internal */\nexport const POSITION_CONTEXT = 'dxcore_position_context';\n/** @internal */\nexport const TEMPLATE_HOST_CONTEXT = 'dxcore_templateHost_context';\n\n/** @internal */\nexport const RERENDER_TEMPLATE_EVENT = Symbol('rerenderTemplate');\n/** @internal */\nexport const RERENDER_TEMPLATE_SCOPE_EVENT = Symbol('rerenderTemplateScope');\n/** @internal */\nexport const UPDATE_CONNECTION_EVENT = Symbol('updateConnection');\n","import * as React from 'react';\nimport { PluginHostContext, PositionContext } from '../plugin-based/contexts';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from '../plugin-based/constants';\n\n/** @internal */\nexport const withContext = (Context, name) => Component => props => (\n  <Context.Consumer>\n    {context => (\n      <Component {...props} {...{ [name]: context }} />\n    )}\n  </Context.Consumer>\n);\n\n/** @internal */\nexport const withHostAndPosition = Component => withContext(\n  PluginHostContext,\n  PLUGIN_HOST_CONTEXT,\n)(withContext(PositionContext, POSITION_CONTEXT)(Component));\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { IDependency } from '../types';\n\nexport interface PluginProps {\n  /** React elements that expose the plugin's state and actions and render the plugin's UI. */\n  children: React.ReactNode;\n  name?: string;\n  dependencies?: IDependency[];\n}\n\n/** @internal */\nexport class PluginBase extends React.PureComponent<PluginProps & PluginContextProps> {\n  plugin!: InnerPlugin;\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: position } = this.props;\n    const { name, dependencies } = this.props;\n    this.plugin = {\n      position,\n      name,\n      dependencies,\n      container: true,\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.ensureDependencies();\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.ensureDependencies();\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <PluginIndexer>\n        {children}\n      </PluginIndexer>\n    );\n  }\n}\n\nexport const Plugin: React.ComponentType<PluginProps> = withHostAndPosition(PluginBase);\n","import * as React from 'react';\nimport { shallowEqual } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, RERENDER_TEMPLATE_EVENT,\n  TEMPLATE_HOST_CONTEXT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\nimport { withContext } from '../utils/with-props-from-context';\nimport { PluginHostContext, TemplateHostContext, TemplateHostInterface } from './contexts';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { TemplateBase } from './template';\n\nexport interface TemplatePlaceholderProps {\n  /** The name of a template to be rendered. */\n  name?: string;\n  /** An object passed to the related template. */\n  params?: object;\n  children?: (content) => any;\n}\ninterface TemplateHostContextProps {\n  [TEMPLATE_HOST_CONTEXT: string]: TemplateHostInterface;\n}\n\ntype Props = TemplatePlaceholderProps & PluginContextProps & TemplateHostContextProps;\n\nconst getRenderingData = (props: Props): { params?: object, templates: TemplateBase[] } => {\n  const { name, params } = props;\n  if (name) {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = props;\n    return {\n      params,\n      templates: pluginHost.collect(`${name}Template`)\n        .filter(template => template.predicate(params))\n        .reverse(),\n    };\n  }\n  const { [TEMPLATE_HOST_CONTEXT]: templateHost } = props;\n  return {\n    params: params || templateHost.params(),\n    templates: templateHost.templates(),\n  };\n};\n\nclass TemplatePlaceholderBase extends React.Component<Props> {\n  subscription = {\n    [RERENDER_TEMPLATE_EVENT]: (id: number) => {\n      if (this.template && this.template.id === id) {\n        this.forceUpdate();\n      }\n    },\n    [RERENDER_TEMPLATE_SCOPE_EVENT]: (name: string) => {\n      const { name: propsName } = this.props;\n      if (propsName === name) {\n        this.forceUpdate();\n      }\n    },\n  };\n  template: TemplateBase | null = null;\n  params?: object = {};\n\n  componentDidMount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  shouldComponentUpdate(nextProps: Props) {\n    const { params, templates } = getRenderingData(nextProps);\n    const [template] = templates;\n    const { children } = this.props;\n\n    return children !== nextProps.children || templates.length > 1\n      || this.template !== template\n      || !shallowEqual(this.params, params);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  render() {\n    const { params, templates } = getRenderingData(this.props);\n\n    this.params = params;\n    [this.template] = templates;\n    const restTemplates = templates.slice(1);\n\n    let content: ((...args) => any) | null = null;\n    if (this.template) {\n      const { children: templateContent } = this.template;\n\n      content = templateContent() || null;\n      if (content && typeof content === 'function') {\n        content = content(params);\n      }\n    }\n\n    const { children: templatePlaceholder } = this.props;\n    return (\n      <TemplateHostContext.Provider\n        value={{\n          templates: () => restTemplates,\n          params: () => this.params,\n        }}\n      >\n        {templatePlaceholder ? templatePlaceholder(content) : content}\n      </TemplateHostContext.Provider>\n    );\n  }\n}\n\n/** A React component to which a related Template is rendered. */\nexport const TemplatePlaceholder: React.ComponentType<TemplatePlaceholderProps> = withContext(\n  PluginHostContext, PLUGIN_HOST_CONTEXT,\n)(\n  withContext(TemplateHostContext, TEMPLATE_HOST_CONTEXT)(TemplatePlaceholderBase),\n);\n\nexport const PlaceholderWithRef: React.ComponentType<TemplatePlaceholderProps & {\n  forwardedRef?: any;\n}> = ({ params, forwardedRef }) => (\n  <TemplatePlaceholder\n    params={{\n      ...params,\n      forwardedRef,\n    }}\n  />\n);\n","import * as React from 'react';\nimport { PluginHost as PluginHostCore } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { TemplatePlaceholder } from './template-placeholder';\nimport { PluginHostContext } from './contexts';\n\nexport interface PluginHostProps {\n  /** Plugin React elements. */\n  children: React.ReactNode;\n}\n\n/** @internal */\nclass PluginHostBase extends React.PureComponent<PluginHostProps> {\n  host: PluginHostCore;\n\n  constructor(props: PluginHostProps) {\n    super(props);\n\n    this.host = new PluginHostCore();\n  }\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <PluginHostContext.Provider value={this.host}>\n        <PluginIndexer>\n          {children}\n        </PluginIndexer>\n        <TemplatePlaceholder name=\"root\" />\n      </PluginHostContext.Provider>\n    );\n  }\n}\n\nexport const PluginHost: React.ComponentType<PluginHostProps> = PluginHostBase;\n","import { shallowEqual } from '@devexpress/dx-core';\n\n/** @internal */\nexport const getAvailableGetters = (\n  pluginHost,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = {};\n\n  let getters;\n  if (typeof Proxy !== 'undefined') {\n    getters = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        const result = getGetterValue(prop);\n        trackedDependencies[prop] = result;\n        return result;\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get!(target as any, prop, undefined),\n        };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Getter');\n      },\n    });\n  } else {\n    getters = pluginHost.knownKeys('Getter')\n      .reduce((acc, getterName) => {\n        Object.defineProperty(acc, getterName, {\n          get: () => {\n            const result = getGetterValue(getterName);\n            trackedDependencies[getterName] = result;\n            return result;\n          },\n        });\n        return acc;\n      }, {});\n  }\n\n  return { getters, trackedDependencies };\n};\n\n/** @internal */\nexport const isTrackedDependenciesChanged = (\n  pluginHost,\n  prevTrackedDependencies,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = Object.keys(prevTrackedDependencies)\n    // tslint:disable-next-line: prefer-object-spread\n    .reduce((acc, getterName) => Object.assign(acc, {\n      [getterName]: getGetterValue(getterName),\n    }), {});\n\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n\n/** @internal */\nexport const getAvailableActions = (\n  pluginHost,\n  getAction = actionName => pluginHost.collect(`${actionName}Action`).slice().reverse()[0],\n) => {\n  let actions;\n  if (typeof Proxy !== 'undefined') {\n    actions = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        return getAction(prop);\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return {\n          configurable: true,\n          enumerable: true,\n          value: this.get!(target as any, prop, undefined),\n        };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Action');\n      },\n    });\n  } else {\n    actions = pluginHost.knownKeys('Action')\n      .reduce((acc, actionName) => {\n        Object.defineProperty(acc, actionName, {\n          get: () => getAction(actionName),\n        });\n        return acc;\n      }, {});\n  }\n  return actions;\n};\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport {\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { Getters, Actions } from '../types';\n\nexport interface ActionProps {\n  /** The action name. */\n  name: string;\n  /** A function that is called when the action is executed. */\n  action: (payload: any, getters: Getters, actions: Actions) => void;\n}\n\nclass ActionBase extends React.PureComponent<ActionProps & PluginContextProps> {\n  plugin: InnerPlugin;\n\n  constructor(props) {\n    super(props);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Action`]: (params) => {\n        const { action } = this.props;\n        const { getters } = getAvailableGetters(\n          pluginHost,\n          getterName => pluginHost.get(`${getterName}Getter`, this.plugin),\n        );\n        let nextParams = params;\n        const actions = getAvailableActions(\n          pluginHost,\n          actionName => (actionName === name\n            ? (newParams) => { nextParams = newParams; }\n            : pluginHost.collect(`${actionName}Action`, this.plugin).slice().reverse()[0]),\n        );\n        action(params, getters, actions);\n        const nextAction = pluginHost.collect(`${name}Action`, this.plugin).slice().reverse()[0];\n        if (nextAction) {\n          nextAction(nextParams);\n        }\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport const Action: React.ComponentType<ActionProps> = withHostAndPosition(ActionBase);\n","import * as React from 'react';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { UPDATE_CONNECTION_EVENT, PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport { PluginContextProps } from './plugin-context-prop-types';\nimport { ComputedFn } from '../types';\n\nexport interface GetterProps {\n  /** The Getter's name. */\n  name: string;\n  /** The shared value. */\n  value?: any;\n  /*** A function that calculates a value depending on the values other Getters expose.\n   * The value is computed each time a related Getter's value changes.\n   * Applies only if `value` is not defined.\n   */\n  computed?: ComputedFn;\n}\n\nclass GetterBase extends React.PureComponent<GetterProps & PluginContextProps> {\n  plugin: InnerPlugin;\n\n  constructor(props) {\n    super(props);\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name } = props;\n\n    let lastComputed;\n    let lastTrackedDependencies = {};\n    let lastResult;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Getter`]: (original) => {\n        const { value, computed } = this.props;\n        if (computed === undefined) return value;\n\n        const getGetterValue = getterName => ((getterName === name)\n          ? original\n          : pluginHost.get(`${getterName}Getter`, this.plugin));\n\n        if (computed === lastComputed\n          && !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n          return lastResult;\n        }\n\n        const { getters, trackedDependencies } = getAvailableGetters(pluginHost, getGetterValue);\n        const actions = getAvailableActions(pluginHost);\n\n        lastComputed = computed;\n        lastTrackedDependencies = trackedDependencies;\n        lastResult = computed(getters, actions);\n        return lastResult;\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.broadcast(UPDATE_CONNECTION_EVENT);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n\n    pluginHost.unregisterPlugin(this.plugin);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport const Getter: React.ComponentType<GetterProps> = withHostAndPosition(GetterBase);\n","import * as React from 'react';\nimport { InnerPlugin } from '@devexpress/dx-core';\nimport {\n  PLUGIN_HOST_CONTEXT, POSITION_CONTEXT,\n  RERENDER_TEMPLATE_EVENT, RERENDER_TEMPLATE_SCOPE_EVENT,\n} from './constants';\nimport { withHostAndPosition } from '../utils/with-props-from-context';\nimport { PluginContextProps } from './plugin-context-prop-types';\n\nexport interface TemplateProps {\n  // tslint:disable-next-line:max-line-length\n  /** The template name. The `root` name is reserved. A template called `root` is rendered as the plugin based component's root. */\n  name: string;\n  // tslint:disable-next-line:max-line-length\n  /** A predicate function that returns a Boolean value that specifies whether the template should be rendered. */\n  predicate?: (params: object) => boolean;\n  /** A markup or function that returns a markup based on the specified parameters. */\n  children: React.ReactNode | ((params: object) => React.ReactNode);\n}\n\nlet globalTemplateId = 0;\n/** @internal */\nexport class TemplateBase extends React.PureComponent<TemplateProps & PluginContextProps> {\n  id: number;\n  plugin: InnerPlugin;\n  children: () => any;\n\n  constructor(props) {\n    super(props);\n\n    this.children = () => void 0;\n\n    globalTemplateId += 1;\n    this.id = globalTemplateId;\n\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost, [POSITION_CONTEXT]: positionContext } = props;\n    const { name, predicate } = props;\n\n    this.plugin = {\n      position: () => positionContext(),\n      [`${name}Template`]: {\n        id: this.id,\n        predicate: params => (predicate ? predicate(params) : true),\n        children: () => {\n          const { children } = this.props;\n          return children;\n        },\n      },\n    };\n    pluginHost.registerPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  componentDidUpdate() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    pluginHost.broadcast(RERENDER_TEMPLATE_EVENT, this.id);\n  }\n\n  componentWillUnmount() {\n    const { [PLUGIN_HOST_CONTEXT]: pluginHost } = this.props;\n    const { name } = this.props;\n    pluginHost.unregisterPlugin(this.plugin);\n    pluginHost.broadcast(RERENDER_TEMPLATE_SCOPE_EVENT, name);\n  }\n\n  render() {\n    return null;\n  }\n}\n\n/*** A React component that defines a markup that is rendered\n * as the corresponding TemplatePlaceholder.\n */\nexport const Template: React.ComponentType<TemplateProps> = withHostAndPosition(TemplateBase);\n","import * as React from 'react';\nimport { UPDATE_CONNECTION_EVENT } from './constants';\nimport {\n  isTrackedDependenciesChanged,\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PluginHostContext } from './contexts';\nimport { Getters, Actions } from '../types';\n\nexport interface TemplateConnectorProps {\n  /** A function that renders a markup using Getters and Actions passed as arguments. */\n  children: (\n    getters: Getters,\n    actions: Actions,\n  ) => React.ReactNode;\n}\n\n/** @internal */\nclass TemplateConnectorBase extends React.Component<TemplateConnectorProps> {\n  trackedDependencies: { [key: string]: { get: (args) => any }};\n  subscription: { [UPDATE_CONNECTION_EVENT: string]: (args) => void };\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.trackedDependencies = {};\n    this.subscription = {\n      [UPDATE_CONNECTION_EVENT]: () => this.updateConnection(),\n    };\n  }\n\n  componentDidMount() {\n    const pluginHost = this.context;\n    pluginHost.registerSubscription(this.subscription);\n  }\n\n  componentWillUnmount() {\n    const pluginHost = this.context;\n    pluginHost.unregisterSubscription(this.subscription);\n  }\n\n  updateConnection() {\n    const pluginHost = this.context;\n\n    if (isTrackedDependenciesChanged(pluginHost, this.trackedDependencies)) {\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    const pluginHost = this.context;\n    const { children } = this.props;\n\n    const { getters, trackedDependencies } = getAvailableGetters(pluginHost);\n    this.trackedDependencies = trackedDependencies;\n    const actions = getAvailableActions(pluginHost);\n\n    return children(getters, actions);\n  }\n}\n\nTemplateConnectorBase.contextType = PluginHostContext;\n\n/** A React component that provides access to Getters and Actions within a Template. */\nexport const TemplateConnector: React.ComponentType<TemplateConnectorProps> = TemplateConnectorBase;\n","const TIMEOUT = 180;\n\n/** @internal */\nexport class TouchStrategy {\n  delegate: any;\n  touchStartTimeout: any;\n  dragging: boolean;\n  mouseInitialOffset: null;\n\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.touchStartTimeout = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  isWaiting() {\n    return !!this.touchStartTimeout;\n  }\n\n  cancelWaiting() {\n    clearTimeout(this.touchStartTimeout);\n    this.touchStartTimeout = undefined;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e.touches[0];\n    this.touchStartTimeout = setTimeout(() => {\n      this.delegate.onStart({ x, y });\n      this.dragging = true;\n    }, TIMEOUT);\n  }\n\n  move(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.touches[0];\n      e.preventDefault();\n      this.delegate.onMove({ x: clientX, y: clientY });\n    }\n  }\n\n  end(e) {\n    this.cancelWaiting();\n    if (this.dragging) {\n      const { clientX, clientY } = e.changedTouches[0];\n      this.delegate.onEnd({ x: clientX, y: clientY });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals document:true */\n\nlet gestureCover: HTMLElement;\n/** @internal */\nexport const toggleGestureCover = (toggle, cursor?) => {\n  let style: React.CSSProperties = {\n    pointerEvents: toggle ? 'all' : 'none',\n  };\n  if (toggle && cursor) {\n    style = {\n      ...style,\n      cursor,\n    };\n  }\n  if (!gestureCover) {\n    style = {\n      ...style,\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      opacity: 0,\n      zIndex: 2147483647,\n    };\n\n    gestureCover = document.createElement('div');\n    document.body.appendChild(gestureCover);\n  }\n  Object.keys(style).forEach((key) => { gestureCover.style[key] = style[key]; });\n};\n","/* globals document:true window:true */\n\n/** @internal */\nexport const clear = () => {\n  const selection = window.getSelection && window.getSelection();\n\n  if (selection) {\n    if (selection.empty) {\n      selection.empty();\n    } else if (selection.removeAllRanges) {\n      selection.removeAllRanges();\n    }\n  }\n};\n","/* globals window:true document:true */\n\nimport { toggleGestureCover } from './gesture-cover';\nimport { clear } from './selection-utils';\n\nconst BOUNDARY = 10;\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\nconst isBoundExceeded = (\n  { x: initialX, y: initialY }, { x, y },\n) => clamp(x, initialX - BOUNDARY, initialX + BOUNDARY) !== x\n  || clamp(y, initialY - BOUNDARY, initialY + BOUNDARY) !== y;\n\n/** @internal */\nexport class MouseStrategy {\n  delegate: any;\n  mouseInitialOffset: any;\n  dragging: boolean;\n  e: any;\n\n  constructor(delegate) {\n    this.delegate = delegate;\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n\n  isDragging() {\n    return this.dragging;\n  }\n\n  start(e) {\n    const { clientX: x, clientY: y } = e;\n    this.e = e;\n    this.mouseInitialOffset = { x, y };\n  }\n\n  move(e) {\n    const { clientX: x, clientY: y } = e;\n    let dragStarted = false;\n    if (!this.dragging && this.mouseInitialOffset) {\n      if (isBoundExceeded(this.mouseInitialOffset, { x, y })) {\n        this.delegate.onStart(this.mouseInitialOffset);\n        clear();\n        dragStarted = true;\n        this.dragging = true;\n      }\n    }\n    if (this.dragging) {\n      e.preventDefault();\n      this.delegate.onMove({ x, y });\n    }\n    if (dragStarted) {\n      const element = document.elementFromPoint(x, y);\n      const cursor = element ? window.getComputedStyle(element).cursor : null;\n      toggleGestureCover(true, cursor);\n    }\n  }\n\n  end(e) {\n    if (this.dragging) {\n      const { clientX: x, clientY: y } = e;\n      toggleGestureCover(false);\n      this.delegate.onEnd({ x, y });\n    }\n    this.mouseInitialOffset = null;\n    this.dragging = false;\n  }\n}\n","/* globals window:true */\n\nimport { EventEmitter } from '@devexpress/dx-core';\n\nlet eventEmitter;\n/** @internal */\nexport const getSharedEventEmitter = () => {\n  if (!eventEmitter) {\n    eventEmitter = new EventEmitter();\n\n    ['mousemove', 'mouseup', 'touchmove', 'touchend', 'touchcancel']\n      .forEach(name => window.addEventListener(\n        name, e => eventEmitter.emit([name, e]), { passive: false },\n      ));\n  }\n  return eventEmitter;\n};\n","import * as React from 'react';\n\n/** @internal */\nexport const RefHolder = React.forwardRef((\n  { children }: { children: React.ReactNode },\n  ref: React.MutableRefObject<any> | React.RefCallback<any> | null,\n) => {\n  return React.isValidElement(children) ?\n    typeof children.type === 'string'\n      ? React.cloneElement(children, { ref })\n      : React.cloneElement(children, { forwardedRef: children.props?.forwardedRef ? (node) => {\n        children.props.forwardedRef(node);\n        if (typeof ref === 'function') {\n          ref(node);\n        } else if (ref) {\n          ref.current = node;\n        }\n      } : ref }) :\n    React.createElement(\n      'div',\n      { ref, style: { display: 'contents' } },\n      children,\n    );\n});\n","import * as React from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { TouchStrategy } from './draggable/touch-strategy';\nimport { MouseStrategy } from './draggable/mouse-strategy';\nimport { getSharedEventEmitter } from './draggable/shared-events';\nimport { clear } from './draggable/selection-utils';\nimport { RefHolder } from './ref-holder';\n\nconst draggingHandled = Symbol('draggingHandled');\n\ntype DraggableProps = {\n  onStart?: (args) => void;\n  onUpdate?: (args) => void;\n  onEnd?: (args) => void;\n  dragItem?: React.MutableRefObject<any> | React.RefCallback<any> | null;\n};\n\n/** @internal */\nexport class Draggable extends React.PureComponent<DraggableProps> {\n  mouseStrategy: MouseStrategy;\n  touchStrategy: TouchStrategy;\n  elementRef: React.MutableRefObject<Element | null>;\n\n  constructor(props) {\n    super(props);\n    const delegate = {\n      onStart: ({ x, y }) => {\n        const { onStart } = this.props;\n        if (!onStart) return;\n        unstable_batchedUpdates(() => {\n          onStart({ x, y });\n        });\n      },\n      onMove: ({ x, y }) => {\n        const { onUpdate } = this.props;\n        if (!onUpdate) return;\n        unstable_batchedUpdates(() => {\n          onUpdate({ x, y });\n        });\n      },\n      onEnd: ({ x, y }) => {\n        const { onEnd } = this.props;\n        if (!onEnd) return;\n        unstable_batchedUpdates(() => {\n          onEnd({ x, y });\n        });\n      },\n    };\n\n    this.mouseStrategy = new MouseStrategy(delegate);\n    this.touchStrategy = new TouchStrategy(delegate);\n    this.elementRef = React.createRef();\n\n    this.mouseDownListener = this.mouseDownListener.bind(this);\n    this.touchStartListener = this.touchStartListener.bind(this);\n    this.globalListener = this.globalListener.bind(this);\n  }\n\n  componentDidMount() {\n    getSharedEventEmitter().subscribe(this.globalListener);\n    this.setupNodeSubscription();\n  }\n\n  componentDidUpdate() {\n    this.setupNodeSubscription();\n  }\n\n  componentWillUnmount() {\n    getSharedEventEmitter().unsubscribe(this.globalListener);\n  }\n\n  setupNodeSubscription() {\n    const node = this.elementRef.current;\n    if (!node) return;\n    node.removeEventListener('mousedown', this.mouseDownListener);\n    node.removeEventListener('touchstart', this.touchStartListener);\n    node.addEventListener('mousedown', this.mouseDownListener);\n    node.addEventListener('touchstart', this.touchStartListener, { passive: true });\n  }\n\n  mouseDownListener(e) {\n    if (this.touchStrategy.isWaiting() || e[draggingHandled]) return;\n    e.preventDefault();\n    this.mouseStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  touchStartListener(e) {\n    if (e[draggingHandled]) return;\n    this.touchStrategy.start(e);\n    e[draggingHandled] = true;\n  }\n\n  globalListener([name, e]) {\n    switch (name) {\n      case 'mousemove':\n        this.mouseStrategy.move(e);\n        break;\n      case 'mouseup':\n        this.mouseStrategy.end(e);\n        break;\n      case 'touchmove': {\n        this.touchStrategy.move(e);\n        break;\n      }\n      case 'touchend':\n      case 'touchcancel': {\n        this.touchStrategy.end(e);\n        break;\n      }\n      default:\n        break;\n    }\n    if (this.mouseStrategy.isDragging() || this.touchStrategy.isDragging()) {\n      clear();\n    }\n  }\n\n  render() {\n    const { children, dragItem } = this.props;\n    return <RefHolder\n      ref={(node: Element | null) => {\n        this.elementRef.current = node;\n        if (typeof dragItem === 'function') {\n          dragItem(node);\n        } else if (dragItem) {\n          dragItem.current = node;\n        }\n      }}\n    >\n      {children}\n    </RefHolder>;\n  }\n}\n","import * as React from 'react';\nimport { DragDropProviderCore } from './provider';\n\n/** @internal */\nexport const DragDropContext = React.createContext<DragDropProviderCore | null>(null);\n","import * as React from 'react';\n\nimport { EventEmitter } from '@devexpress/dx-core';\nimport { DragDropContext } from './context';\n\n/** @internal */\nexport class DragDropProviderCore {\n  payload: null;\n  dragEmitter: EventEmitter;\n\n  constructor() {\n    this.payload = null;\n    this.dragEmitter = new EventEmitter();\n  }\n\n  start(payload, clientOffset) {\n    this.payload = payload;\n    this.dragEmitter.emit({ clientOffset, payload: this.payload });\n  }\n\n  update(clientOffset) {\n    this.dragEmitter.emit({ clientOffset, payload: this.payload });\n  }\n\n  end(clientOffset) {\n    this.dragEmitter.emit({ clientOffset, payload: this.payload, end: true });\n    this.payload = null;\n  }\n}\n\nconst defaultProps = {\n  onChange: ({ payload, clientOffset }) => {},\n};\ntype DragDropProviderDefaultProps = Readonly<typeof defaultProps>;\ntype DragDropProviderProps = Partial<DragDropProviderDefaultProps>;\n\n/** @internal */\n// tslint:disable-next-line: max-classes-per-file\nexport class DragDropProvider extends React.Component<\n  DragDropProviderProps & DragDropProviderDefaultProps\n> {\n  static defaultProps = defaultProps;\n  dragDropProvider: DragDropProviderCore;\n\n  constructor(props) {\n    super(props);\n    const { onChange } = this.props;\n\n    this.dragDropProvider = new DragDropProviderCore();\n\n    this.dragDropProvider.dragEmitter.subscribe(({ payload, clientOffset, end }) => {\n      onChange({\n        payload: end ? null : payload,\n        clientOffset: end ? null : clientOffset,\n      });\n    });\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <DragDropContext.Provider value={this.dragDropProvider}>\n        {children}\n      </DragDropContext.Provider>\n    );\n  }\n}\n","import * as React from 'react';\nimport { DragDropContext } from './context';\nimport { Draggable } from '../draggable';\n\nconst defaultProps = {\n  onStart: ({ clientOffset }) => {},\n  onUpdate: ({ clientOffset }) => {},\n  onEnd: ({ clientOffset }) => {},\n};\ntype DragSourceDefaultProps = Readonly<typeof defaultProps>;\ntype DragSourceProps = {\n  payload: any;\n  ref?: React.Ref<Element>;\n} & Partial<DragSourceDefaultProps>;\n\n/** @internal */\nexport const DragSource: React.FC<DragSourceProps> = React.forwardRef(({\n  onStart, onUpdate, onEnd, payload, children,\n}, ref) => {\n  const context = React.useContext(DragDropContext);\n  const dragDropProvider = context;\n\n  return (\n    <Draggable\n      onStart={({ x, y }) => {\n        dragDropProvider?.start(payload, { x, y });\n        onStart?.({ clientOffset: { x, y } });\n      }}\n      onUpdate={({ x, y }) => {\n        dragDropProvider?.update({ x, y });\n        onUpdate?.({ clientOffset: { x, y } });\n      }}\n      onEnd={({ x, y }) => {\n        dragDropProvider?.end({ x, y });\n        onEnd?.({ clientOffset: { x, y } });\n      }}\n      dragItem={ref}\n    >\n      {children}\n    </Draggable>\n  );\n});\nDragSource.defaultProps = defaultProps;\n","import * as React from 'react';\nimport { RefHolder } from '../ref-holder';\nimport { DragDropContext } from './context';\n\nconst clamp = (value, min, max) => Math.max(Math.min(value, max), min);\n\nconst defaultProps = {\n  onEnter: (args) => {},\n  onOver: (args) => {},\n  onLeave: (args) => {},\n  onDrop: (args) => {},\n};\ntype DropTargetDefaultProps = Readonly<typeof defaultProps>;\n\n/** @internal */\nexport class DropTarget extends React.Component<DropTargetDefaultProps> {\n  static defaultProps = defaultProps;\n  isOver: boolean;\n  elementRef: React.RefObject<Element>;\n\n  constructor(props) {\n    super(props);\n\n    this.isOver = false;\n\n    this.handleDrag = this.handleDrag.bind(this);\n\n    this.elementRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { dragEmitter } = this.context;\n    dragEmitter.subscribe(this.handleDrag);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { children } = this.props;\n    return nextProps.children !== children;\n  }\n\n  componentWillUnmount() {\n    const { dragEmitter } = this.context;\n    dragEmitter.unsubscribe(this.handleDrag);\n  }\n\n  handleDrag({ payload, clientOffset, end }) {\n    const {\n      left,\n      top,\n      right,\n      bottom,\n    } = this.elementRef.current!.getBoundingClientRect();\n    const {\n      onDrop, onEnter, onLeave, onOver,\n    } = this.props;\n    const isOver = clientOffset\n      && clamp(clientOffset.x, left, right) === clientOffset.x\n      && clamp(clientOffset.y, top, bottom) === clientOffset.y;\n\n    if (!this.isOver && isOver) onEnter({ payload, clientOffset });\n    if (this.isOver && isOver) onOver({ payload, clientOffset });\n    if (this.isOver && !isOver) onLeave({ payload, clientOffset });\n    if (isOver && end) onDrop({ payload, clientOffset });\n\n    this.isOver = isOver && !end;\n  }\n\n  render() {\n    const { children } = this.props;\n    return <RefHolder ref={this.elementRef}>{React.Children.only(children)}</RefHolder>;\n  }\n}\n\nDropTarget.contextType = DragDropContext;\n","/* globals document:true */\n\nimport * as React from 'react';\nimport { SizerProps, Size } from './types';\n\nconst styles = {\n  root: {\n    position: 'relative',\n  },\n  triggersRoot: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    zIndex: -1,\n    visibility: 'hidden',\n    opacity: 0,\n  },\n  expandTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n  },\n  contractTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n    minHeight: '1px',\n    minWidth: '1px',\n  },\n  contractNotifier: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '200%',\n    height: '200%',\n    minHeight: '2px',\n    minWidth: '2px',\n  },\n};\n\n/** @internal */\nexport class Sizer extends React.PureComponent<SizerProps> {\n  static defaultProps = {\n    containerComponent: 'div',\n  };\n\n  rootRef: React.RefObject<unknown>;\n  // Though there properties cannot be assigned in constructor\n  // they will be assigned when component is mount.\n  rootNode!: HTMLElement;\n  triggersRoot!: HTMLDivElement;\n  expandTrigger!: HTMLDivElement;\n  expandNotifier!: HTMLDivElement;\n  contractTrigger!: HTMLDivElement;\n  contractNotifier!: HTMLDivElement;\n\n  constructor(props) {\n    super(props);\n\n    this.setupListeners = this.setupListeners.bind(this);\n    this.rootRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.createListeners();\n    this.setupListeners();\n  }\n\n  componentDidUpdate() {\n    // We can scroll the VirtualTable manually only by changing\n    // containter's (rootNode) scrollTop property.\n    // Viewport changes its own properties automatically.\n    const { scrollTop, scrollLeft } = this.props;\n    if (scrollTop! > -1) {\n      this.rootNode.scrollTop = scrollTop!;\n    }\n    if (scrollLeft! > -1) {\n      this.rootNode.scrollLeft = scrollLeft!;\n    }\n  }\n\n  // There is no need to remove listeners as divs are removed from DOM when component is unmount.\n  // But there is a little chance that component unmounting and 'scroll' event happen roughly\n  // at the same time so that `setupListeners` is called after component is unmount.\n  componentWillUnmount() {\n    this.expandTrigger.removeEventListener('scroll', this.setupListeners);\n    this.contractTrigger.removeEventListener('scroll', this.setupListeners);\n  }\n\n  getSize = (): Size => ({ height: this.rootNode.clientHeight, width: this.rootNode.clientWidth });\n\n  setupListeners() {\n    const size = this.getSize();\n    const { width, height } = size;\n\n    this.contractTrigger.scrollTop = height;\n    this.contractTrigger.scrollLeft = width;\n\n    const scrollOffset = 2;\n    this.expandNotifier.style.width = `${width + scrollOffset}px`;\n    this.expandNotifier.style.height = `${height + scrollOffset}px`;\n    this.expandTrigger.scrollTop = scrollOffset;\n    this.expandTrigger.scrollLeft = scrollOffset;\n\n    const { onSizeChange } = this.props;\n    onSizeChange(size);\n  }\n\n  createListeners() {\n    this.rootNode = this.rootRef.current as HTMLElement;\n\n    this.triggersRoot = document.createElement('div');\n    Object.assign(this.triggersRoot.style, styles.triggersRoot);\n    this.rootNode.appendChild(this.triggersRoot);\n\n    this.expandTrigger = document.createElement('div');\n    Object.assign(this.expandTrigger.style, styles.expandTrigger);\n    this.expandTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.expandTrigger);\n\n    this.expandNotifier = document.createElement('div');\n    this.expandTrigger.appendChild(this.expandNotifier);\n\n    this.contractTrigger = document.createElement('div');\n    Object.assign(this.contractTrigger.style, styles.contractTrigger);\n    this.contractTrigger.addEventListener('scroll', this.setupListeners);\n    this.triggersRoot.appendChild(this.contractTrigger);\n\n    this.contractNotifier = document.createElement('div');\n    Object.assign(this.contractNotifier.style, styles.contractNotifier);\n    this.contractTrigger.appendChild(this.contractNotifier);\n  }\n\n  render() {\n    const {\n      onSizeChange,\n      containerComponent: Container,\n      style,\n      scrollTop,\n      scrollLeft,\n      ...restProps\n    } = this.props;\n\n    return (\n      <Container // NOTE: should have `position: relative`\n        forwardedRef={this.rootRef}\n        style={style ? { ...styles.root, ...style } : styles.root}\n        {...restProps}\n      />\n    );\n  }\n}\n","import * as React from 'react';\n\ntype RenderComponentProps = {\n  update: () => void;\n};\n\n/*** A function that creates a new component that allows you to pass additional properties\n * to the wrapped component.\n */\nexport const connectProps = (\n  WrappedComponent: React.ComponentType<any>, getAdditionalProps: () => object,\n): React.ComponentType<any> & { update(): void } => {\n  let storedAdditionalProps = getAdditionalProps();\n  const components = new Set<React.Component>();\n  class RenderComponent extends React.PureComponent<RenderComponentProps> {\n    static update: () => void;\n\n    componentDidMount() {\n      components.add(this);\n    }\n\n    componentWillUnmount() {\n      components.delete(this);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} {...storedAdditionalProps} />;\n    }\n  }\n  RenderComponent.update = () => {\n    storedAdditionalProps = getAdditionalProps();\n    Array.from(components.values()).forEach(component => component.forceUpdate());\n  };\n  return RenderComponent;\n};\n","import { CreateStateHelperFn } from '../types';\n\n/** @internal */\nexport const createStateHelper: CreateStateHelperFn = (\n  component, controlledStateProperties = {},\n) => {\n  const notifyStateChange = (nextState, state) => {\n    Object.keys(controlledStateProperties).forEach((propertyName) => {\n      const changeEvent = controlledStateProperties[propertyName]();\n      if (changeEvent && nextState[propertyName] !== state[propertyName]) {\n        changeEvent(nextState[propertyName]);\n      }\n    });\n  };\n\n  let lastStateUpdater: (state) => void;\n  let initialState = null;\n  let lastInitialState = null;\n  let newState = null;\n  let shouldNotify = false;\n\n  const applyReducer = (reduce, payload?, callback?) => {\n    const stateUpdater = (prevState) => {\n      if (initialState === null) {\n        initialState = prevState;\n      }\n      const stateChange = reduce({ ...prevState }, payload);\n      const state = { ...prevState, ...stateChange };\n\n      if (typeof callback === 'function') {\n        callback(state, prevState);\n      }\n      if (stateUpdater === lastStateUpdater) {\n        if (lastInitialState !== initialState) {\n          newState = state;\n          if (!shouldNotify) {\n            lastInitialState = initialState;\n            shouldNotify = true;\n          }\n        }\n        initialState = null;\n      }\n\n      return stateChange;\n    };\n    lastStateUpdater = stateUpdater;\n\n    component.setState(stateUpdater, () => {\n      if (shouldNotify) {\n        notifyStateChange(newState, lastInitialState);\n        shouldNotify = false;\n      }\n    });\n  };\n  const applyFieldReducer = (field, reduce, payload) => {\n    applyReducer(state => ({\n      [field]: reduce(state[field], payload),\n    }));\n  };\n\n  return {\n    applyReducer,\n    applyFieldReducer,\n  };\n};\n","import * as React from 'react';\n\nconst makeBoundComponent = (Target, components, exposed: object) => {\n  class Component extends React.PureComponent {\n    static components: PluginComponents;\n\n    render() {\n      return <Target {...components} {...this.props} />;\n    }\n  }\n  Component.components = Target.components;\n  Object.assign(Component, exposed);\n  return Component;\n};\n\nexport type PluginComponents = { [key: string]: string };\nexport interface ITargetComponent {\n  components: PluginComponents;\n}\n// type ITargetComponentStatic = new() => ITargetComponent;\n\n/** @internal */\nexport const withComponents = components => (Target) => {\n  const props = {};\n  const exposed = {};\n  const targetComponents = (Target as ITargetComponent).components;\n\n  Object.entries(targetComponents).forEach(([fieldName, componentName]: [string, string]) => {\n    const component = components[componentName];\n    if (component && component !== Target[componentName]) {\n      props[fieldName] = component;\n    }\n    exposed[componentName] = component || Target[componentName];\n  });\n\n  return Object.keys(props).length > 0\n    ? makeBoundComponent(Target, props, exposed) : Target;\n};\n","/* globals Element */\nimport * as PropTypes from 'prop-types';\n\n/** @internal */\nexport const RefType = PropTypes.shape({\n  current: PropTypes.instanceOf((typeof Element !== 'undefined') ? Element : Object),\n});\n"]},"metadata":{},"sourceType":"module"}