{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupUnitTestWatcherTimeouts = exports.isOnBrowserTests = exports.extendAbiRegistry = exports.loadAbiRegistry = exports.loadContractCode = void 0;\n\nconst code_1 = require(\"../smartcontracts/code\");\n\nconst typesystem_1 = require(\"../smartcontracts/typesystem\");\n\nconst transactionWatcher_1 = require(\"../transactionWatcher\");\n\nfunction loadContractCode(path) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (isOnBrowserTests()) {\n      return code_1.Code.fromUrl(path.toString());\n    }\n\n    return code_1.Code.fromFile(path);\n  });\n}\n\nexports.loadContractCode = loadContractCode;\n\nfunction loadAbiRegistry(paths) {\n  return __awaiter(this, void 0, void 0, function* () {\n    let sources = paths.map(e => e.toString());\n\n    if (isOnBrowserTests()) {\n      return typesystem_1.AbiRegistry.load({\n        urls: sources\n      });\n    }\n\n    return typesystem_1.AbiRegistry.load({\n      files: sources\n    });\n  });\n}\n\nexports.loadAbiRegistry = loadAbiRegistry;\n\nfunction extendAbiRegistry(registry, path) {\n  return __awaiter(this, void 0, void 0, function* () {\n    let source = path.toString();\n\n    if (isOnBrowserTests()) {\n      return registry.extendFromUrl(source);\n    }\n\n    return registry.extendFromFile(source);\n  });\n}\n\nexports.extendAbiRegistry = extendAbiRegistry;\n\nfunction isOnBrowserTests() {\n  const BROWSER_TESTS_URL = \"browser-tests\";\n  let noWindow = typeof window === \"undefined\";\n\n  if (noWindow) {\n    return false;\n  }\n\n  let isOnTests = window.location.href.includes(BROWSER_TESTS_URL);\n  return isOnTests;\n}\n\nexports.isOnBrowserTests = isOnBrowserTests;\n\nfunction setupUnitTestWatcherTimeouts() {\n  transactionWatcher_1.TransactionWatcher.DefaultPollingInterval = 42;\n  transactionWatcher_1.TransactionWatcher.DefaultTimeout = 42 * 42;\n}\n\nexports.setupUnitTestWatcherTimeouts = setupUnitTestWatcherTimeouts;","map":{"version":3,"sources":["../../src/testutils/utils.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAA,MAAA,GAAA,OAAA,CAAA,wBAAA,CAAA;;AACA,MAAA,YAAA,GAAA,OAAA,CAAA,8BAAA,CAAA;;AACA,MAAA,oBAAA,GAAA,OAAA,CAAA,uBAAA,CAAA;;AAEA,SAAsB,gBAAtB,CAAuC,IAAvC,EAAqD;;AACjD,QAAI,gBAAgB,EAApB,EAAwB;AACpB,aAAO,MAAA,CAAA,IAAA,CAAK,OAAL,CAAa,IAAI,CAAC,QAAL,EAAb,CAAP;AACH;;AAED,WAAO,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,IAAd,CAAP;AACH,G;AAAA;;AAND,OAAA,CAAA,gBAAA,GAAA,gBAAA;;AAQA,SAAsB,eAAtB,CAAsC,KAAtC,EAAuD;;AACnD,QAAI,OAAO,GAAG,KAAK,CAAC,GAAN,CAAU,CAAC,IAAI,CAAC,CAAC,QAAF,EAAf,CAAd;;AAEA,QAAI,gBAAgB,EAApB,EAAwB;AACpB,aAAO,YAAA,CAAA,WAAA,CAAY,IAAZ,CAAiB;AAAE,QAAA,IAAI,EAAE;AAAR,OAAjB,CAAP;AACH;;AAED,WAAO,YAAA,CAAA,WAAA,CAAY,IAAZ,CAAiB;AAAE,MAAA,KAAK,EAAE;AAAT,KAAjB,CAAP;AACH,G;AAAA;;AARD,OAAA,CAAA,eAAA,GAAA,eAAA;;AAUA,SAAsB,iBAAtB,CAAwC,QAAxC,EAA+D,IAA/D,EAA6E;;AACzE,QAAI,MAAM,GAAG,IAAI,CAAC,QAAL,EAAb;;AAEA,QAAI,gBAAgB,EAApB,EAAwB;AACpB,aAAO,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAP;AACH;;AAED,WAAO,QAAQ,CAAC,cAAT,CAAwB,MAAxB,CAAP;AACH,G;AAAA;;AARD,OAAA,CAAA,iBAAA,GAAA,iBAAA;;AAUA,SAAgB,gBAAhB,GAAgC;AAC5B,QAAM,iBAAiB,GAAG,eAA1B;AAEA,MAAI,QAAQ,GAAG,OAAO,MAAP,KAAkB,WAAjC;;AACA,MAAI,QAAJ,EAAc;AACV,WAAO,KAAP;AACH;;AAED,MAAI,SAAS,GAAG,MAAM,CAAC,QAAP,CAAgB,IAAhB,CAAqB,QAArB,CAA8B,iBAA9B,CAAhB;AACA,SAAO,SAAP;AACH;;AAVD,OAAA,CAAA,gBAAA,GAAA,gBAAA;;AAYA,SAAgB,4BAAhB,GAA4C;AACxC,EAAA,oBAAA,CAAA,kBAAA,CAAmB,sBAAnB,GAA4C,EAA5C;AACA,EAAA,oBAAA,CAAA,kBAAA,CAAmB,cAAnB,GAAoC,KAAK,EAAzC;AACH;;AAHD,OAAA,CAAA,4BAAA,GAAA,4BAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setupUnitTestWatcherTimeouts = exports.isOnBrowserTests = exports.extendAbiRegistry = exports.loadAbiRegistry = exports.loadContractCode = void 0;\nconst code_1 = require(\"../smartcontracts/code\");\nconst typesystem_1 = require(\"../smartcontracts/typesystem\");\nconst transactionWatcher_1 = require(\"../transactionWatcher\");\nfunction loadContractCode(path) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (isOnBrowserTests()) {\n            return code_1.Code.fromUrl(path.toString());\n        }\n        return code_1.Code.fromFile(path);\n    });\n}\nexports.loadContractCode = loadContractCode;\nfunction loadAbiRegistry(paths) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let sources = paths.map(e => e.toString());\n        if (isOnBrowserTests()) {\n            return typesystem_1.AbiRegistry.load({ urls: sources });\n        }\n        return typesystem_1.AbiRegistry.load({ files: sources });\n    });\n}\nexports.loadAbiRegistry = loadAbiRegistry;\nfunction extendAbiRegistry(registry, path) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let source = path.toString();\n        if (isOnBrowserTests()) {\n            return registry.extendFromUrl(source);\n        }\n        return registry.extendFromFile(source);\n    });\n}\nexports.extendAbiRegistry = extendAbiRegistry;\nfunction isOnBrowserTests() {\n    const BROWSER_TESTS_URL = \"browser-tests\";\n    let noWindow = typeof window === \"undefined\";\n    if (noWindow) {\n        return false;\n    }\n    let isOnTests = window.location.href.includes(BROWSER_TESTS_URL);\n    return isOnTests;\n}\nexports.isOnBrowserTests = isOnBrowserTests;\nfunction setupUnitTestWatcherTimeouts() {\n    transactionWatcher_1.TransactionWatcher.DefaultPollingInterval = 42;\n    transactionWatcher_1.TransactionWatcher.DefaultTimeout = 42 * 42;\n}\nexports.setupUnitTestWatcherTimeouts = setupUnitTestWatcherTimeouts;\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"script"}