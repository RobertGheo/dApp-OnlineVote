{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Egld = exports.createBalanceBuilder = void 0;\n\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n\nconst _1 = require(\".\");\n\nconst errors_1 = require(\"./errors\");\n\nconst token_1 = require(\"./token\");\n\nclass BalanceBuilderImpl {\n  constructor(token) {\n    this.token = token;\n    this.nonce_ = null;\n\n    if (token.isFungible()) {\n      this.setNonce(0);\n    }\n  }\n\n  value(value) {\n    value = applyDenomination(value, this.token.decimals);\n    return new _1.Balance(this.token, this.getNonce(), value);\n  }\n\n  raw(value) {\n    return new _1.Balance(this.token, this.getNonce(), value);\n  }\n\n  nonce(nonce) {\n    let builder = createBalanceBuilder(this.token);\n    builder.setNonce(nonce);\n    return builder;\n  }\n\n  setNonce(nonce) {\n    this.nonce_ = new bignumber_js_1.default(nonce);\n  }\n\n  one() {\n    return this.value(1);\n  }\n\n  hasNonce() {\n    return this.token.isFungible() || this.nonce_ != null;\n  }\n\n  getNonce() {\n    if (this.nonce_ == null) {\n      throw new _1.ErrInvariantFailed(\"Nonce was not provided\");\n    }\n\n    return new bignumber_js_1.default(this.nonce_);\n  }\n\n  getToken() {\n    return this.token;\n  }\n\n  getTokenIdentifier() {\n    return this.getToken().getTokenIdentifier();\n  }\n\n}\n\nfunction createBalanceBuilder(token) {\n  let impl = new BalanceBuilderImpl(token);\n  let denominated = impl.value.bind(impl);\n  let others = {\n    value: impl.value.bind(impl),\n    raw: impl.raw.bind(impl),\n    nonce: impl.nonce.bind(impl),\n    setNonce: impl.setNonce.bind(impl),\n    one: impl.one.bind(impl),\n    hasNonce: impl.hasNonce.bind(impl),\n    getNonce: impl.getNonce.bind(impl),\n    getToken: impl.getToken.bind(impl),\n    getTokenIdentifier: impl.getTokenIdentifier.bind(impl)\n  };\n  return Object.assign(denominated, others);\n}\n\nexports.createBalanceBuilder = createBalanceBuilder;\n/**\n * Builder for an EGLD value.\n */\n\nexports.Egld = createBalanceBuilder(new token_1.Token({\n  identifier: \"EGLD\",\n  name: \"eGold\",\n  decimals: 18,\n  type: token_1.TokenType.Fungible\n}));\n\nfunction applyDenomination(value, decimals) {\n  if (decimals < 0) {\n    throw new errors_1.ErrInvalidArgument(\"The number of decimals must be positive\");\n  }\n\n  return new bignumber_js_1.default(value).shiftedBy(decimals).decimalPlaces(0);\n}","map":{"version":3,"sources":["../src/balanceBuilder.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Egld = exports.createBalanceBuilder = void 0;\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\nconst _1 = require(\".\");\nconst errors_1 = require(\"./errors\");\nconst token_1 = require(\"./token\");\nclass BalanceBuilderImpl {\n    constructor(token) {\n        this.token = token;\n        this.nonce_ = null;\n        if (token.isFungible()) {\n            this.setNonce(0);\n        }\n    }\n    value(value) {\n        value = applyDenomination(value, this.token.decimals);\n        return new _1.Balance(this.token, this.getNonce(), value);\n    }\n    raw(value) {\n        return new _1.Balance(this.token, this.getNonce(), value);\n    }\n    nonce(nonce) {\n        let builder = createBalanceBuilder(this.token);\n        builder.setNonce(nonce);\n        return builder;\n    }\n    setNonce(nonce) {\n        this.nonce_ = new bignumber_js_1.default(nonce);\n    }\n    one() {\n        return this.value(1);\n    }\n    hasNonce() {\n        return this.token.isFungible() || this.nonce_ != null;\n    }\n    getNonce() {\n        if (this.nonce_ == null) {\n            throw new _1.ErrInvariantFailed(\"Nonce was not provided\");\n        }\n        return new bignumber_js_1.default(this.nonce_);\n    }\n    getToken() {\n        return this.token;\n    }\n    getTokenIdentifier() {\n        return this.getToken().getTokenIdentifier();\n    }\n}\nfunction createBalanceBuilder(token) {\n    let impl = new BalanceBuilderImpl(token);\n    let denominated = impl.value.bind(impl);\n    let others = {\n        value: impl.value.bind(impl),\n        raw: impl.raw.bind(impl),\n        nonce: impl.nonce.bind(impl),\n        setNonce: impl.setNonce.bind(impl),\n        one: impl.one.bind(impl),\n        hasNonce: impl.hasNonce.bind(impl),\n        getNonce: impl.getNonce.bind(impl),\n        getToken: impl.getToken.bind(impl),\n        getTokenIdentifier: impl.getTokenIdentifier.bind(impl)\n    };\n    return Object.assign(denominated, others);\n}\nexports.createBalanceBuilder = createBalanceBuilder;\n/**\n * Builder for an EGLD value.\n */\nexports.Egld = createBalanceBuilder(new token_1.Token({ identifier: \"EGLD\", name: \"eGold\", decimals: 18, type: token_1.TokenType.Fungible }));\nfunction applyDenomination(value, decimals) {\n    if (decimals < 0) {\n        throw new errors_1.ErrInvalidArgument(\"The number of decimals must be positive\");\n    }\n    return new bignumber_js_1.default(value).shiftedBy(decimals).decimalPlaces(0);\n}\n//# sourceMappingURL=balanceBuilder.js.map"]},"metadata":{},"sourceType":"script"}