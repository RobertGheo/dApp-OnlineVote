{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tuple = exports.TupleType = void 0;\n\nconst errors = __importStar(require(\"../../errors\"));\n\nconst struct_1 = require(\"./struct\");\n\nconst fields_1 = require(\"./fields\");\n\nconst struct_2 = require(\"./struct\");\n\nclass TupleType extends struct_2.StructType {\n  constructor() {\n    for (var _len = arguments.length, typeParameters = new Array(_len), _key = 0; _key < _len; _key++) {\n      typeParameters[_key] = arguments[_key];\n    }\n\n    super(TupleType.prepareName(typeParameters), TupleType.prepareFieldDefinitions(typeParameters));\n  }\n\n  static prepareName(typeParameters) {\n    let fields = typeParameters.map(type => type.toString()).join(\", \");\n    let result = `tuple${fields.length}<${fields}>`;\n    return result;\n  }\n\n  static prepareFieldDefinitions(typeParameters) {\n    let result = typeParameters.map((type, i) => new fields_1.FieldDefinition(prepareFieldName(i), \"anonymous tuple field\", type));\n    return result;\n  }\n\n}\n\nexports.TupleType = TupleType;\n\nfunction prepareFieldName(fieldIndex) {\n  return `field${fieldIndex}`;\n} // TODO: Perhaps add a common base class for Struct and Tuple, called FieldsHolder?\n// Or let Tuple be the base class, but have Struct as a specialization of it, \"named tuple\"?\n// Or leave as it is?\n\n\nclass Tuple extends struct_1.Struct {\n  constructor(type, fields) {\n    super(type, fields);\n  }\n\n  static fromItems(items) {\n    if (items.length < 1) {\n      // TODO: Define a better error.\n      throw new errors.ErrTypingSystem(\"bad tuple items\");\n    }\n\n    let fieldsTypes = items.map(item => item.getType());\n    let tupleType = new TupleType(...fieldsTypes);\n    let fields = items.map((item, i) => new fields_1.Field(item, prepareFieldName(i)));\n    return new Tuple(tupleType, fields);\n  }\n\n}\n\nexports.Tuple = Tuple;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AAEA,MAAaA,SAAb,SAA+BC,mBAA/B,CAAyC;AACrCC,gBAAqC;AAAA,sCAAtBC,cAAsB;AAAtBA,oBAAsB;AAAA;;AACjC,UAAMH,SAAS,CAACI,WAAV,CAAsBD,cAAtB,CAAN,EAA6CH,SAAS,CAACK,uBAAV,CAAkCF,cAAlC,CAA7C;AACH;;AAEyB,SAAXC,WAAW,CAACD,cAAD,EAAuB;AAC7C,QAAIG,MAAM,GAAWH,cAAc,CAACI,GAAf,CAAmBC,IAAI,IAAIA,IAAI,CAACC,QAAL,EAA3B,EAA4CC,IAA5C,CAAiD,IAAjD,CAArB;AACA,QAAIC,MAAM,GAAG,QAAQL,MAAM,CAACM,MAAM,IAAIN,MAAM,GAA5C;AACA,WAAOK,MAAP;AACH;;AAEqC,SAAvBN,uBAAuB,CAACF,cAAD,EAAuB;AACzD,QAAIQ,MAAM,GAAGR,cAAc,CAACI,GAAf,CAAmB,CAACC,IAAD,EAAOK,CAAP,KAAa,IAAIC,wBAAJ,CAAoBC,gBAAgB,CAACF,CAAD,CAApC,EAAyC,uBAAzC,EAAkEL,IAAlE,CAAhC,CAAb;AACA,WAAOG,MAAP;AACH;;AAdoC;;AAAzCK;;AAiBA,SAASD,gBAAT,CAA0BE,UAA1B,EAA4C;AACxC,SAAO,QAAQA,UAAU,EAAzB;AACH,C,CAED;AACA;AACA;;;AACA,MAAaC,KAAb,SAA2BC,eAA3B,CAAiC;AAC7BjB,cAAYM,IAAZ,EAA6BF,MAA7B,EAA4C;AACxC,UAAME,IAAN,EAAYF,MAAZ;AACH;;AAEe,SAATc,SAAS,CAACC,KAAD,EAAoB;AAChC,QAAIA,KAAK,CAACT,MAAN,GAAe,CAAnB,EAAsB;AAClB;AACA,YAAM,IAAIU,MAAM,CAACC,eAAX,CAA2B,iBAA3B,CAAN;AACH;;AAED,QAAIC,WAAW,GAAGH,KAAK,CAACd,GAAN,CAAUkB,IAAI,IAAIA,IAAI,CAACC,OAAL,EAAlB,CAAlB;AACA,QAAIC,SAAS,GAAG,IAAI3B,SAAJ,CAAc,GAAGwB,WAAjB,CAAhB;AACA,QAAIlB,MAAM,GAAGe,KAAK,CAACd,GAAN,CAAU,CAACkB,IAAD,EAAOZ,CAAP,KAAa,IAAIC,cAAJ,CAAUW,IAAV,EAAgBV,gBAAgB,CAACF,CAAD,CAAhC,CAAvB,CAAb;AAEA,WAAO,IAAIK,KAAJ,CAAUS,SAAV,EAAqBrB,MAArB,CAAP;AACH;;AAhB4B;;AAAjCU","names":["TupleType","struct_2","constructor","typeParameters","prepareName","prepareFieldDefinitions","fields","map","type","toString","join","result","length","i","fields_1","prepareFieldName","exports","fieldIndex","Tuple","struct_1","fromItems","items","errors","ErrTypingSystem","fieldsTypes","item","getType","tupleType"],"sourceRoot":"","sources":["../../../src/smartcontracts/typesystem/tuple.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}